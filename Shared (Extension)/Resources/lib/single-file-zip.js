const{Array:e,Object:t,String:n,Number:r,BigInt:s,Math:a,Date:i,Map:o,Set:c,Response:l,URL:u,Error:f,Uint8Array:d,Uint16Array:h,Uint32Array:p,DataView:w,Blob:g,Promise:m,TextEncoder:y,TextDecoder:b,document:z,crypto:S,btoa:v,TransformStream:k,ReadableStream:x,WritableStream:_,CompressionStream:D,DecompressionStream:C,navigator:F,Worker:E}=globalThis,A=4294967295,T=65535,W=8,U=0,R=99,H=67324752,B=134695760,M=B,q=33639248,N=101010256,L=101075792,I=117853008,O=22,V=1,P=39169,K=10,j=1,X=21589,Z=6534,G=1,J=8,Q=2048,Y=45,$=51,ee="/",te=new i(2107,11,31),ne=new i(1980,0,1),re=void 0,se="undefined",ae="function";class ie{constructor(e){return class extends k{constructor(t,n){const r=new e(n);super({transform(e,t){t.enqueue(r.append(e))},flush(e){const t=r.flush();t&&e.enqueue(t)}})}}}}const oe=64;let ce=2;try{typeof F!=se&&F.hardwareConcurrency&&(ce=F.hardwareConcurrency)}catch(e){}const le={chunkSize:524288,maxWorkers:ce,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:re,CompressionStreamNative:typeof D!=se&&D,DecompressionStreamNative:typeof C!=se&&C},ue=t.assign({},le);function fe(){return ue}function de(e){return a.max(e.chunkSize,oe)}function he(t){const{baseURL:n,chunkSize:r,maxWorkers:s,terminateWorkerTimeout:a,useCompressionStream:i,useWebWorkers:o,Deflate:c,Inflate:l,CompressionStream:u,DecompressionStream:d,workerScripts:h}=t;if(pe("baseURL",n),pe("chunkSize",r),pe("maxWorkers",s),pe("terminateWorkerTimeout",a),pe("useCompressionStream",i),pe("useWebWorkers",o),c&&(ue.CompressionStream=new ie(c)),l&&(ue.DecompressionStream=new ie(l)),pe("CompressionStream",u),pe("DecompressionStream",d),h!==re){const{deflate:t,inflate:n}=h;if((t||n)&&(ue.workerScripts||(ue.workerScripts={})),t){if(!e.isArray(t))throw new f("workerScripts.deflate must be an array");ue.workerScripts.deflate=t}if(n){if(!e.isArray(n))throw new f("workerScripts.inflate must be an array");ue.workerScripts.inflate=n}}}function pe(e,t){t!==re&&(ue[e]=t)}function we(){return"application/octet-stream"}function ge(e,t={},n){return{Deflate:me(e.Deflate,t.deflate,n),Inflate:me(e.Inflate,t.inflate,n)}}function me(e,n,r){return class{constructor(s){const a=this;var i,o;i=s,o="level",("function"==typeof t.hasOwn?t.hasOwn(i,o):i.hasOwnProperty(o))&&void 0===s.level&&delete s.level,a.codec=new e(t.assign({},n,s)),r(a.codec,(e=>{if(a.pendingData){const t=a.pendingData;a.pendingData=new d(t.length+e.length);const{pendingData:n}=a;n.set(t,0),n.set(e,t.length)}else a.pendingData=new d(e)}))}append(e){return this.codec.push(e),s(this)}flush(){return this.codec.push(new d,!0),s(this)}};function s(e){if(e.pendingData){const t=e.pendingData;return e.pendingData=null,t}return new d}}const ye=[];for(let e=0;e<256;e++){let t=e;for(let e=0;e<8;e++)1&t?t=t>>>1^3988292384:t>>>=1;ye[e]=t}class be{constructor(e){this.crc=e||-1}append(e){let t=0|this.crc;for(let n=0,r=0|e.length;n<r;n++)t=t>>>8^ye[255&(t^e[n])];this.crc=t}get(){return~this.crc}}class ze extends k{constructor(){let e;const t=new be;super({transform(e,n){t.append(e),n.enqueue(e)},flush(){const n=new d(4);new w(n.buffer).setUint32(0,t.get()),e.value=n}}),e=this}}function Se(e){if(void 0===y){e=unescape(encodeURIComponent(e));const t=new d(e.length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new y).encode(e)}const ve={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const n=e[e.length-1],r=ve.getPartial(n);return 32===r?e.concat(t):ve._shiftRight(t,r,0|n,e.slice(0,e.length-1))},bitLength(e){const t=e.length;if(0===t)return 0;const n=e[t-1];return 32*(t-1)+ve.getPartial(n)},clamp(e,t){if(32*e.length<t)return e;const n=(e=e.slice(0,a.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=ve.partial(t,e[n-1]&2147483648>>t-1,1)),e},partial:(e,t,n)=>32===e?t:(n?0|t:t<<32-e)+1099511627776*e,getPartial:e=>a.round(e/1099511627776)||32,_shiftRight(e,t,n,r){for(void 0===r&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(let s=0;s<e.length;s++)r.push(n|e[s]>>>t),n=e[s]<<32-t;const s=e.length?e[e.length-1]:0,a=ve.getPartial(s);return r.push(ve.partial(t+a&31,t+a>32?n:r.pop(),1)),r}},ke={bytes:{fromBits(e){const t=ve.bitLength(e)/8,n=new d(t);let r;for(let s=0;s<t;s++)0==(3&s)&&(r=e[s/4]),n[s]=r>>>24,r<<=8;return n},toBits(e){const t=[];let n,r=0;for(n=0;n<e.length;n++)r=r<<8|e[n],3==(3&n)&&(t.push(r),r=0);return 3&n&&t.push(ve.partial(8*(3&n),r)),t}}},xe={sha1:class{constructor(e){const t=this;t.blockSize=512,t._init=[1732584193,4023233417,2562383102,271733878,3285377520],t._key=[1518500249,1859775393,2400959708,3395469782],e?(t._h=e._h.slice(0),t._buffer=e._buffer.slice(0),t._length=e._length):t.reset()}reset(){const e=this;return e._h=e._init.slice(0),e._buffer=[],e._length=0,e}update(e){const t=this;"string"==typeof e&&(e=ke.utf8String.toBits(e));const n=t._buffer=ve.concat(t._buffer,e),r=t._length,s=t._length=r+ve.bitLength(e);if(s>9007199254740991)throw new f("Cannot hash more than 2^53 - 1 bits");const a=new p(n);let i=0;for(let e=t.blockSize+r-(t.blockSize+r&t.blockSize-1);e<=s;e+=t.blockSize)t._block(a.subarray(16*i,16*(i+1))),i+=1;return n.splice(0,16*i),t}finalize(){const e=this;let t=e._buffer;const n=e._h;t=ve.concat(t,[ve.partial(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(a.floor(e._length/4294967296)),t.push(0|e._length);t.length;)e._block(t.splice(0,16));return e.reset(),n}_f(e,t,n,r){return e<=19?t&n|~t&r:e<=39?t^n^r:e<=59?t&n|t&r|n&r:e<=79?t^n^r:void 0}_S(e,t){return t<<e|t>>>32-e}_block(t){const n=this,r=n._h,s=e(80);for(let e=0;e<16;e++)s[e]=t[e];let i=r[0],o=r[1],c=r[2],l=r[3],u=r[4];for(let e=0;e<=79;e++){e>=16&&(s[e]=n._S(1,s[e-3]^s[e-8]^s[e-14]^s[e-16]));const t=n._S(5,i)+n._f(e,o,c,l)+u+s[e]+n._key[a.floor(e/20)]|0;u=l,l=c,c=n._S(30,o),o=i,i=t}r[0]=r[0]+i|0,r[1]=r[1]+o|0,r[2]=r[2]+c|0,r[3]=r[3]+l|0,r[4]=r[4]+u|0}}},_e={aes:class{constructor(e){const t=this;t._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],t._tables[0][0][0]||t._precompute();const n=t._tables[0][4],r=t._tables[1],s=e.length;let a,i,o,c=1;if(4!==s&&6!==s&&8!==s)throw new f("invalid aes key size");for(t._key=[i=e.slice(0),o=[]],a=s;a<4*s+28;a++){let e=i[a-1];(a%s==0||8===s&&a%s==4)&&(e=n[e>>>24]<<24^n[e>>16&255]<<16^n[e>>8&255]<<8^n[255&e],a%s==0&&(e=e<<8^e>>>24^c<<24,c=c<<1^283*(c>>7))),i[a]=i[a-s]^e}for(let e=0;a;e++,a--){const t=i[3&e?a:a-4];o[e]=a<=4||e<4?t:r[0][n[t>>>24]]^r[1][n[t>>16&255]]^r[2][n[t>>8&255]]^r[3][n[255&t]]}}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){const e=this._tables[0],t=this._tables[1],n=e[4],r=t[4],s=[],a=[];let i,o,c,l;for(let e=0;e<256;e++)a[(s[e]=e<<1^283*(e>>7))^e]=e;for(let u=i=0;!n[u];u^=o||1,i=a[i]||1){let a=i^i<<1^i<<2^i<<3^i<<4;a=a>>8^255&a^99,n[u]=a,r[a]=u,l=s[c=s[o=s[u]]];let f=16843009*l^65537*c^257*o^16843008*u,d=257*s[a]^16843008*a;for(let n=0;n<4;n++)e[n][u]=d=d<<24^d>>>8,t[n][a]=f=f<<24^f>>>8}for(let n=0;n<5;n++)e[n]=e[n].slice(0),t[n]=t[n].slice(0)}_crypt(e,t){if(4!==e.length)throw new f("invalid aes block size");const n=this._key[t],r=n.length/4-2,s=[0,0,0,0],a=this._tables[t],i=a[0],o=a[1],c=a[2],l=a[3],u=a[4];let d,h,p,w=e[0]^n[0],g=e[t?3:1]^n[1],m=e[2]^n[2],y=e[t?1:3]^n[3],b=4;for(let e=0;e<r;e++)d=i[w>>>24]^o[g>>16&255]^c[m>>8&255]^l[255&y]^n[b],h=i[g>>>24]^o[m>>16&255]^c[y>>8&255]^l[255&w]^n[b+1],p=i[m>>>24]^o[y>>16&255]^c[w>>8&255]^l[255&g]^n[b+2],y=i[y>>>24]^o[w>>16&255]^c[g>>8&255]^l[255&m]^n[b+3],b+=4,w=d,g=h,m=p;for(let e=0;e<4;e++)s[t?3&-e:e]=u[w>>>24]<<24^u[g>>16&255]<<16^u[m>>8&255]<<8^u[255&y]^n[b++],d=w,w=g,g=m,m=y,y=d;return s}}},De={getRandomValues(e){const t=new p(e.buffer),n=e=>{let t=987654321;const n=4294967295;return function(){t=36969*(65535&t)+(t>>16)&n;return(((t<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(a.random()>.5?1:-1)}};for(let r,s=0;s<e.length;s+=4){const e=n(4294967296*(r||a.random()));r=987654071*e(),t[s/4]=4294967296*e()|0}return e}},Ce={ctrGladman:class{constructor(e,t){this._prf=e,this._initIv=t,this._iv=t}reset(){this._iv=this._initIv}update(e){return this.calculate(this._prf,e,this._iv)}incWord(e){if(255==(e>>24&255)){let t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}incCounter(e){0===(e[0]=this.incWord(e[0]))&&(e[1]=this.incWord(e[1]))}calculate(e,t,n){let r;if(!(r=t.length))return[];const s=ve.bitLength(t);for(let s=0;s<r;s+=4){this.incCounter(n);const r=e.encrypt(n);t[s]^=r[0],t[s+1]^=r[1],t[s+2]^=r[2],t[s+3]^=r[3]}return ve.clamp(t,s)}}},Fe={importKey:e=>new Fe.hmacSha1(ke.bytes.toBits(e)),pbkdf2(e,t,n,r){if(n=n||1e4,r<0||n<0)throw new f("invalid params to pbkdf2");const s=1+(r>>5)<<2;let a,i,o,c,l;const u=new ArrayBuffer(s),d=new w(u);let h=0;const p=ve;for(t=ke.bytes.toBits(t),l=1;h<(s||1);l++){for(a=i=e.encrypt(p.concat(t,[l])),o=1;o<n;o++)for(i=e.encrypt(i),c=0;c<i.length;c++)a[c]^=i[c];for(o=0;h<(s||1)&&o<a.length;o++)d.setInt32(h,a[o]),h+=4}return u.slice(0,r/8)},hmacSha1:class{constructor(e){const t=this,n=t._hash=xe.sha1,r=[[],[]];t._baseHash=[new n,new n];const s=t._baseHash[0].blockSize/32;e.length>s&&(e=(new n).update(e).finalize());for(let t=0;t<s;t++)r[0][t]=909522486^e[t],r[1][t]=1549556828^e[t];t._baseHash[0].update(r[0]),t._baseHash[1].update(r[1]),t._resultHash=new n(t._baseHash[0])}reset(){const e=this;e._resultHash=new e._hash(e._baseHash[0]),e._updated=!1}update(e){this._updated=!0,this._resultHash.update(e)}digest(){const e=this,t=e._resultHash.finalize(),n=new e._hash(e._baseHash[1]).update(t).finalize();return e.reset(),n}encrypt(e){if(this._updated)throw new f("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},Ee=void 0!==S&&"function"==typeof S.getRandomValues,Ae="Invalid password",Te="Invalid signature",We="zipjs-abort-check-password";function Ue(e){return Ee?S.getRandomValues(e):De.getRandomValues(e)}const Re=16,He="raw",Be={name:"PBKDF2"},Me=t.assign({hash:{name:"HMAC"}},Be),qe=t.assign({iterations:1e3,hash:{name:"SHA-1"}},Be),Ne=["deriveBits"],Le=[8,12,16],Ie=[16,24,32],Oe=10,Ve=[0,0,0,0],Pe="undefined",Ke="function",je=typeof S!=Pe,Xe=je&&S.subtle,Ze=je&&typeof Xe!=Pe,Ge=ke.bytes,Je=_e.aes,Qe=Ce.ctrGladman,Ye=Fe.hmacSha1;let $e=je&&Ze&&typeof Xe.importKey==Ke,et=je&&Ze&&typeof Xe.deriveBits==Ke;class tt extends k{constructor({password:e,signed:n,encryptionStrength:r,checkPasswordOnly:s}){super({start(){t.assign(this,{ready:new m((e=>this.resolveReady=e)),password:e,signed:n,strength:r-1,pending:new d})},async transform(e,t){const n=this,{password:r,strength:a,resolveReady:i,ready:o}=n;r?(await async function(e,t,n,r){const s=await st(e,t,n,it(r,0,Le[t])),a=it(r,Le[t]);if(s[0]!=a[0]||s[1]!=a[1])throw new f(Ae)}(n,a,r,it(e,0,Le[a]+2)),e=it(e,Le[a]+2),s?t.error(new f(We)):i()):await o;const c=new d(e.length-Oe-(e.length-Oe)%Re);t.enqueue(rt(n,e,c,0,Oe,!0))},async flush(e){const{signed:t,ctr:n,hmac:r,pending:s,ready:a}=this;await a;const i=it(s,0,s.length-Oe),o=it(s,s.length-Oe);let c=new d;if(i.length){const e=ct(Ge,i);r.update(e);const t=n.update(e);c=ot(Ge,t)}if(t){const e=it(ot(Ge,r.digest()),0,Oe);for(let t=0;t<Oe;t++)if(e[t]!=o[t])throw new f(Te)}e.enqueue(c)}})}}class nt extends k{constructor({password:e,encryptionStrength:n}){let r;super({start(){t.assign(this,{ready:new m((e=>this.resolveReady=e)),password:e,strength:n-1,pending:new d})},async transform(e,t){const n=this,{password:r,strength:s,resolveReady:a,ready:i}=n;let o=new d;r?(o=await async function(e,t,n){const r=Ue(new d(Le[t])),s=await st(e,t,n,r);return at(r,s)}(n,s,r),a()):await i;const c=new d(o.length+e.length-e.length%Re);c.set(o,0),t.enqueue(rt(n,e,c,o.length,0))},async flush(e){const{ctr:t,hmac:n,pending:s,ready:a}=this;await a;let i=new d;if(s.length){const e=t.update(ct(Ge,s));n.update(e),i=ot(Ge,e)}r.signature=ot(Ge,n.digest()).slice(0,Oe),e.enqueue(at(i,r.signature))}}),r=this}}function rt(e,t,n,r,s,a){const{ctr:i,hmac:o,pending:c}=e,l=t.length-s;let u;for(c.length&&(t=at(c,t),n=function(e,t){if(t&&t>e.length){const n=e;(e=new d(t)).set(n,0)}return e}(n,l-l%Re)),u=0;u<=l-Re;u+=Re){const e=ct(Ge,it(t,u,u+Re));a&&o.update(e);const s=i.update(e);a||o.update(s),n.set(ot(Ge,s),u+r)}return e.pending=it(t,u),n}async function st(n,r,s,a){n.password=null;const i=Se(s),o=await async function(e,t,n,r,s){if(!$e)return Fe.importKey(t);try{return await Xe.importKey(e,t,n,r,s)}catch(e){return $e=!1,Fe.importKey(t)}}(He,i,Me,!1,Ne),c=await async function(e,t,n){if(!et)return Fe.pbkdf2(t,e.salt,qe.iterations,n);try{return await Xe.deriveBits(e,t,n)}catch(r){return et=!1,Fe.pbkdf2(t,e.salt,qe.iterations,n)}}(t.assign({salt:a},qe),o,8*(2*Ie[r]+2)),l=new d(c),u=ct(Ge,it(l,0,Ie[r])),f=ct(Ge,it(l,Ie[r],2*Ie[r])),h=it(l,2*Ie[r]);return t.assign(n,{keys:{key:u,authentication:f,passwordVerification:h},ctr:new Qe(new Je(u),e.from(Ve)),hmac:new Ye(f)}),h}function at(e,t){let n=e;return e.length+t.length&&(n=new d(e.length+t.length),n.set(e,0),n.set(t,e.length)),n}function it(e,t,n){return e.subarray(t,n)}function ot(e,t){return e.fromBits(t)}function ct(e,t){return e.toBits(t)}const lt=12;class ut extends k{constructor({password:e,passwordVerification:n,checkPasswordOnly:r}){super({start(){t.assign(this,{password:e,passwordVerification:n}),pt(this,e)},transform(e,t){const n=this;if(n.password){const t=dt(n,e.subarray(0,lt));if(n.password=null,t[11]!=n.passwordVerification)throw new f(Ae);e=e.subarray(lt)}r?t.error(new f(We)):t.enqueue(dt(n,e))}})}}class ft extends k{constructor({password:e,passwordVerification:n}){super({start(){t.assign(this,{password:e,passwordVerification:n}),pt(this,e)},transform(e,t){const n=this;let r,s;if(n.password){n.password=null;const t=Ue(new d(lt));t[11]=n.passwordVerification,r=new d(e.length+t.length),r.set(ht(n,t),0),s=lt}else r=new d(e.length),s=0;r.set(ht(n,e),s),t.enqueue(r)}})}}function dt(e,t){const n=new d(t.length);for(let r=0;r<t.length;r++)n[r]=gt(e)^t[r],wt(e,n[r]);return n}function ht(e,t){const n=new d(t.length);for(let r=0;r<t.length;r++)n[r]=gt(e)^t[r],wt(e,t[r]);return n}function pt(e,n){const r=[305419896,591751049,878082192];t.assign(e,{keys:r,crcKey0:new be(r[0]),crcKey2:new be(r[2])});for(let t=0;t<n.length;t++)wt(e,n.charCodeAt(t))}function wt(e,t){let[n,r,s]=e.keys;e.crcKey0.append([t]),n=~e.crcKey0.get(),r=yt(a.imul(yt(r+mt(n)),134775813)+1),e.crcKey2.append([r>>>24]),s=~e.crcKey2.get(),e.keys=[n,r,s]}function gt(e){const t=2|e.keys[2];return mt(a.imul(t,1^t)>>>8)}function mt(e){return 255&e}function yt(e){return 4294967295&e}const bt="deflate-raw";class zt extends k{constructor(e,{chunkSize:t,CompressionStream:n,CompressionStreamNative:r}){super({});const{compressed:s,encrypted:a,useCompressionStream:i,zipCrypto:o,signed:c,level:l}=e,u=this;let f,d,h=vt(super.readable);a&&!o||!c||(f=new ze,h=_t(h,f)),s&&(h=xt(h,i,{level:l,chunkSize:t},r,n)),a&&(o?h=_t(h,new ft(e)):(d=new nt(e),h=_t(h,d))),kt(u,h,(()=>{let e;a&&!o&&(e=d.signature),a&&!o||!c||(e=new w(f.value.buffer).getUint32(0)),u.signature=e}))}}class St extends k{constructor(e,{chunkSize:t,DecompressionStream:n,DecompressionStreamNative:r}){super({});const{zipCrypto:s,encrypted:a,signed:i,signature:o,compressed:c,useCompressionStream:l}=e;let u,d,h=vt(super.readable);a&&(s?h=_t(h,new ut(e)):(d=new tt(e),h=_t(h,d))),c&&(h=xt(h,l,{chunkSize:t},r,n)),a&&!s||!i||(u=new ze,h=_t(h,u)),kt(this,h,(()=>{if((!a||s)&&i){const e=new w(u.value.buffer);if(o!=e.getUint32(0,!1))throw new f(Te)}}))}}function vt(e){return _t(e,new k({transform(e,t){e&&e.length&&t.enqueue(e)}}))}function kt(e,n,r){n=_t(n,new k({flush:r})),t.defineProperty(e,"readable",{get:()=>n})}function xt(e,t,n,r,s){try{e=_t(e,new(t&&r?r:s)(bt,n))}catch(r){if(!t)throw r;e=_t(e,new s(bt,n))}return e}function _t(e,t){return e.pipeThrough(t)}const Dt="message",Ct="start",Ft="pull",Et="data",At="ack",Tt="close",Wt="deflate",Ut="inflate";class Rt extends k{constructor(e,n){super({});const r=this,{codecType:s}=e;let a;s.startsWith(Wt)?a=zt:s.startsWith(Ut)&&(a=St);let i=0;const o=new a(e,n),c=super.readable,l=new k({transform(e,t){e&&e.length&&(i+=e.length,t.enqueue(e))},flush(){const{signature:e}=o;t.assign(r,{signature:e,size:i})}});t.defineProperty(r,"readable",{get:()=>c.pipeThrough(o).pipeThrough(l)})}}const Ht=typeof E!=se;class Bt{constructor(e,{readable:n,writable:r},{options:s,config:a,streamOptions:i,useWebWorkers:o,transferStreams:c,scripts:l},u){const{signal:f}=i;return t.assign(e,{busy:!0,readable:n.pipeThrough(new Mt(n,i,a),{signal:f}),writable:r,options:t.assign({},s),scripts:l,transferStreams:c,terminate(){const{worker:t,busy:n}=e;t&&!n&&(t.terminate(),e.interface=null)},onTaskFinished(){e.busy=!1,u(e)}}),(o&&Ht?Lt:Nt)(e,a)}}class Mt extends k{constructor(e,{onstart:t,onprogress:n,size:r,onend:s},{chunkSize:a}){let i=0;super({start(){t&&qt(t,r)},async transform(e,t){i+=e.length,n&&await qt(n,i,r),t.enqueue(e)},flush(){e.size=i,s&&qt(s,i)}},{highWaterMark:1,size:()=>a})}}async function qt(e,...t){try{await e(...t)}catch(e){}}function Nt(e,t){return{run:()=>async function({options:e,readable:t,writable:n,onTaskFinished:r},s){const a=new Rt(e,s);try{await t.pipeThrough(a).pipeTo(n,{preventClose:!0,preventAbort:!0});const{signature:e,size:r}=a;return{signature:e,size:r}}finally{r()}}(e,t)}}function Lt(e,{baseURL:n,chunkSize:r}){return e.interface||t.assign(e,{worker:Vt(e.scripts[0],n,e),interface:{run:()=>async function(e,n){let r,s;const a=new m(((e,t)=>{r=e,s=t}));t.assign(e,{reader:null,writer:null,resolveResult:r,rejectResult:s,result:a});const{readable:i,options:o,scripts:c}=e,{writable:l,closed:u}=function(e){const t=e.getWriter();let n;const r=new m((e=>n=e)),s=new _({async write(e){await t.ready,await t.write(e)},close(){t.releaseLock(),n()},abort:e=>t.abort(e)});return{writable:s,closed:r}}(e.writable),f=Pt({type:Ct,scripts:c.slice(1),options:o,config:n,readable:i,writable:l},e);f||t.assign(e,{reader:i.getReader(),writer:l.getWriter()});const d=await a;try{await l.getWriter().close()}catch(e){}return await u,d}(e,{chunkSize:r})}}),e.interface}let It=!0,Ot=!0;function Vt(e,n,r){const s={type:"module"};let a,i;typeof e==ae&&(e=e());try{a=new u(e,n)}catch(t){a=e}if(It)try{i=new E(a)}catch(e){It=!1,i=new E(a,s)}else i=new E(a,s);return i.addEventListener(Dt,(e=>async function({data:e},n){const{type:r,value:s,messageId:a,result:i,error:o}=e,{reader:c,writer:l,resolveResult:u,rejectResult:h,onTaskFinished:p}=n;try{if(o){const{message:e,stack:n,code:r,name:s}=o,a=new f(e);t.assign(a,{stack:n,code:r,name:s}),w(a)}else{if(r==Ft){const{value:e,done:t}=await c.read();Pt({type:Et,value:e,done:t,messageId:a},n)}r==Et&&(await l.ready,await l.write(new d(s)),Pt({type:At,messageId:a},n)),r==Tt&&w(null,i)}}catch(o){w(o)}function w(e,t){e?h(e):u(t),l&&l.releaseLock(),p()}}(e,r))),i}function Pt(e,{worker:t,writer:n,onTaskFinished:r,transferStreams:s}){try{let{value:n,readable:r,writable:a}=e;const i=[];if(n&&(e.value=n.buffer,i.push(e.value)),s&&Ot?(r&&i.push(r),a&&i.push(a)):e.readable=e.writable=null,i.length)try{return t.postMessage(e,i),!0}catch(n){Ot=!1,e.readable=e.writable=null,t.postMessage(e)}else t.postMessage(e)}catch(e){throw n&&n.releaseLock(),r(),e}}let Kt=[];const jt=[];let Xt=0;async function Zt(e,t){const{options:n,config:s}=t,{transferStreams:a,useWebWorkers:i,useCompressionStream:o,codecType:c,compressed:l,signed:u,encrypted:f}=n,{workerScripts:d,maxWorkers:h,terminateWorkerTimeout:p}=s;t.transferStreams=a||a===re;const w=!(l||u||f||t.transferStreams);let g;t.useWebWorkers=!w&&(i||i===re&&s.useWebWorkers),t.scripts=t.useWebWorkers&&d?d[c]:[],n.useCompressionStream=o||o===re&&s.useCompressionStream;const y=Kt.find((e=>!e.busy));if(y)Gt(y),g=new Bt(y,e,t,b);else if(Kt.length<h){const n={indexWorker:Xt};Xt++,Kt.push(n),g=new Bt(n,e,t,b)}else g=await new m((n=>jt.push({resolve:n,stream:e,workerOptions:t})));return g.run();function b(e){if(jt.length){const[{resolve:t,stream:n,workerOptions:r}]=jt.splice(0,1);t(new Bt(e,n,r,b))}else e.worker?(Gt(e),r.isFinite(p)&&p>=0&&(e.terminateTimeout=setTimeout((()=>{Kt=Kt.filter((t=>t!=e)),e.terminate()}),p))):Kt=Kt.filter((t=>t!=e))}}function Gt(e){const{terminateTimeout:t}=e;t&&(clearTimeout(t),e.terminateTimeout=null)}function Jt(){Kt.forEach((e=>{Gt(e),e.terminate()}))}const Qt="HTTP error ",Yt="HTTP Range not supported",$t="Writer iterator completed too soon",en="Content-Length",tn="Range",nn="HEAD",rn="GET",sn="bytes",an=65536,on="writable";class cn{constructor(){this.size=0}init(){this.initialized=!0}}class ln extends cn{get readable(){const e=this,{chunkSize:t=an}=e,n=new x({start(){this.chunkOffset=0},async pull(r){const{offset:s=0,size:i,diskNumberStart:o}=n,{chunkOffset:c}=this;r.enqueue(await Nn(e,s+c,a.min(t,i-c),o)),c+t>i?r.close():this.chunkOffset+=t}});return n}}class un extends cn{constructor(){super();const e=this,n=new _({write:t=>e.writeUint8Array(t)});t.defineProperty(e,on,{get:()=>n})}writeUint8Array(){}}class fn extends ln{constructor(e){super();let n=e.length;for(;"="==e.charAt(n-1);)n--;const r=e.indexOf(",")+1;t.assign(this,{dataURI:e,dataStart:r,size:a.floor(.75*(n-r))})}readUint8Array(e,t){const{dataStart:n,dataURI:r}=this,s=new d(t),i=4*a.floor(e/3),o=atob(r.substring(i+n,4*a.ceil((e+t)/3)+n)),c=e-3*a.floor(i/4);for(let e=c;e<c+t;e++)s[e-c]=o.charCodeAt(e);return s}}class dn extends un{constructor(e){super(),t.assign(this,{data:"data:"+(e||"")+";base64,",pending:[]})}writeUint8Array(e){const t=this;let r=0,s=t.pending;const i=t.pending.length;for(t.pending="",r=0;r<3*a.floor((i+e.length)/3)-i;r++)s+=n.fromCharCode(e[r]);for(;r<e.length;r++)t.pending+=n.fromCharCode(e[r]);s.length>2?t.data+=v(s):t.pending=s}getData(){return this.data+v(this.pending)}}class hn extends ln{constructor(e){super(),t.assign(this,{blob:e,size:e.size})}async readUint8Array(e,t){const n=this,r=e+t,s=e||r<n.size?n.blob.slice(e,r):n.blob;let a=await s.arrayBuffer();return a.byteLength>t&&(a=a.slice(e,r)),new d(a)}}class pn extends cn{constructor(e){super();const n=new k,r=[];e&&r.push(["Content-Type",e]),t.defineProperty(this,on,{get:()=>n.writable}),this.blob=new l(n.readable,{headers:r}).blob()}getData(){return this.blob}}class wn extends hn{constructor(e){super(new g([e],{type:"text/plain"}))}}class gn extends pn{constructor(e){super(e),t.assign(this,{encoding:e,utf8:!e||"utf-8"==e.toLowerCase()})}async getData(){const{encoding:e,utf8:n}=this,r=await super.getData();if(r.text&&n)return r.text();{const n=new FileReader;return new m(((s,a)=>{t.assign(n,{onload:({target:e})=>s(e.result),onerror:()=>a(n.error)}),n.readAsText(r,e)}))}}}class mn extends ln{constructor(e,t){super(),bn(this,e,t)}async init(){await zn(this,Fn,xn),super.init()}readUint8Array(e,t){return Sn(this,e,t,Fn,xn)}}class yn extends ln{constructor(e,t){super(),bn(this,e,t)}async init(){await zn(this,En,_n),super.init()}readUint8Array(e,t){return Sn(this,e,t,En,_n)}}function bn(e,n,r){const{preventHeadRequest:s,useRangeHeader:a,forceRangeRequests:i}=r;delete(r=t.assign({},r)).preventHeadRequest,delete r.useRangeHeader,delete r.forceRangeRequests,delete r.useXHR,t.assign(e,{url:n,options:r,preventHeadRequest:s,useRangeHeader:a,forceRangeRequests:i})}async function zn(e,t,n){const{url:s,useRangeHeader:a,forceRangeRequests:i}=e;if(function(e){const{baseURL:t}=fe(),{protocol:n}=new u(e,t);return"http:"==n||"https:"==n}(s)&&(a||i)){const{headers:s}=await t(rn,e,vn(e));if(!i&&s.get("Accept-Ranges")!=sn)throw new f(Yt);{let a;const i=s.get("Content-Range");if(i){const e=i.trim().split(/\s*\/\s*/);if(e.length){const t=e[1];t&&"*"!=t&&(a=r(t))}}a===re?await Cn(e,t,n):e.size=a}}else await Cn(e,t,n)}async function Sn(e,t,n,r,s){const{useRangeHeader:a,forceRangeRequests:i,options:o}=e;if(a||i){const s=await r(rn,e,vn(e,t,n));if(206!=s.status)throw new f(Yt);return new d(await s.arrayBuffer())}{const{data:r}=e;return r||await s(e,o),new d(e.data.subarray(t,t+n))}}function vn(e,n=0,r=1){return t.assign({},kn(e),{[tn]:sn+"="+n+"-"+(n+r-1)})}function kn({options:e}){const{headers:n}=e;if(n)return Symbol.iterator in n?t.fromEntries(n):n}async function xn(e){await Dn(e,Fn)}async function _n(e){await Dn(e,En)}async function Dn(e,t){const n=await t(rn,e,kn(e));e.data=new d(await n.arrayBuffer()),e.size||(e.size=e.data.length)}async function Cn(e,t,n){if(e.preventHeadRequest)await n(e,e.options);else{const s=(await t(nn,e,kn(e))).headers.get(en);s?e.size=r(s):await n(e,e.options)}}async function Fn(e,{options:n,url:r},s){const a=await fetch(r,t.assign({},n,{method:e,headers:s}));if(a.status<400)return a;throw 416==a.status?new f(Yt):new f(Qt+(a.statusText||a.status))}function En(e,{url:n},r){return new m(((s,a)=>{const i=new XMLHttpRequest;if(i.addEventListener("load",(()=>{if(i.status<400){const e=[];i.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((t=>{const n=t.trim().split(/\s*:\s*/);n[0]=n[0].trim().replace(/^[a-z]|-[a-z]/g,(e=>e.toUpperCase())),e.push(n)})),s({status:i.status,arrayBuffer:()=>i.response,headers:new o(e)})}else a(416==i.status?new f(Yt):new f(Qt+(i.statusText||i.status)))}),!1),i.addEventListener("error",(e=>a(e.detail?e.detail.error:new f("Network error"))),!1),i.open(e,n),r)for(const e of t.entries(r))i.setRequestHeader(e[0],e[1]);i.responseType="arraybuffer",i.send()}))}class An extends ln{constructor(e,n={}){super(),t.assign(this,{url:e,reader:n.useXHR?new yn(e,n):new mn(e,n)})}set size(e){}get size(){return this.reader.size}async init(){await this.reader.init(),super.init()}readUint8Array(e,t){return this.reader.readUint8Array(e,t)}}class Tn extends An{constructor(e,t={}){t.useRangeHeader=!0,super(e,t)}}class Wn extends ln{constructor(e){super(),t.assign(this,{array:e,size:e.length})}readUint8Array(e,t){return this.array.slice(e,e+t)}}class Un extends un{init(e=0){t.assign(this,{offset:0,array:new d(e)}),super.init()}writeUint8Array(e){const t=this;if(t.offset+e.length>t.array.length){const n=t.array;t.array=new d(n.length+e.length),t.array.set(n)}t.array.set(e,t.offset),t.offset+=e.length}getData(){return this.array}}class Rn extends ln{constructor(e){super(),this.readers=e}async init(){const e=this,{readers:t}=e;e.lastDiskNumber=0,e.lastDiskOffset=0,await m.all(t.map((async(n,r)=>{await n.init(),r!=t.length-1&&(e.lastDiskOffset+=n.size),e.size+=n.size}))),super.init()}async readUint8Array(e,t,n=0){const r=this,{readers:s}=this;let i,o=n;-1==o&&(o=s.length-1);let c=e;for(;c>=s[o].size;)c-=s[o].size,o++;const l=s[o],u=l.size;if(c+t<=u)i=await Nn(l,c,t);else{const s=u-c;i=new d(t),i.set(await Nn(l,c,s)),i.set(await r.readUint8Array(e+s,t-s,n),s)}return r.lastDiskNumber=a.max(o,r.lastDiskNumber),i}}class Hn extends cn{constructor(e,n=4294967295){super();const r=this;let s,a,i;t.assign(r,{diskNumber:0,diskOffset:0,size:0,maxSize:n,availableSize:n});const o=new _({async write(t){const{availableSize:n}=r;if(i)t.length>=n?(await c(t.slice(0,n)),await l(),r.diskOffset+=s.size,r.diskNumber++,i=null,await this.write(t.slice(n))):await c(t);else{const{value:n,done:o}=await e.next();if(o&&!n)throw new f($t);s=n,s.size=0,s.maxSize&&(r.maxSize=s.maxSize),r.availableSize=r.maxSize,await Bn(s),a=n.writable,i=a.getWriter(),await this.write(t)}},async close(){await i.ready,await l()}});async function c(e){const t=e.length;t&&(await i.ready,await i.write(e),s.size+=t,r.size+=t,r.availableSize-=t)}async function l(){a.size=s.size,await i.close()}t.defineProperty(r,on,{get:()=>o})}}async function Bn(e,t){e.init&&!e.initialized&&await e.init(t)}function Mn(t){return e.isArray(t)&&(t=new Rn(t)),t instanceof x&&(t={readable:t}),t}function qn(e){e.writable===re&&typeof e.next==ae&&(e=new Hn(e)),e instanceof _&&(e={writable:e});const{writable:n}=e;n.size===re&&(n.size=0);return e instanceof Hn||t.assign(e,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),e}function Nn(e,t,n,r){return e.readUint8Array(t,n,r)}const Ln=Rn,In=Hn,On="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split(""),Vn=256==On.length;function Pn(e,t){return t&&"cp437"==t.trim().toLowerCase()?function(e){if(Vn){let t="";for(let n=0;n<e.length;n++)t+=On[e[n]];return t}return(new b).decode(e)}(e):new b(t).decode(e)}const Kn="filename",jn="rawFilename",Xn="comment",Zn="rawComment",Gn="uncompressedSize",Jn="compressedSize",Qn="offset",Yn="diskNumberStart",$n="lastModDate",er="rawLastModDate",tr="lastAccessDate",nr="rawLastAccessDate",rr="creationDate",sr="rawCreationDate",ar="internalFileAttribute",ir="externalFileAttribute",or="msDosCompatible",cr="zip64",lr=[Kn,jn,Jn,Gn,$n,er,Xn,Zn,tr,rr,Qn,Yn,Yn,ar,ir,or,cr,"directory","bitFlag","encrypted","signature","filenameUTF8","commentUTF8","compressionMethod","version","versionMadeBy","extraField","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"];class ur{constructor(e){lr.forEach((t=>this[t]=e[t]))}}const fr="File format is not recognized",dr="End of central directory not found",hr="End of Zip64 central directory not found",pr="End of Zip64 central directory locator not found",wr="Central directory header not found",gr="Local file header not found",mr="Zip64 extra field not found",yr="File contains encrypted entry",br="Encryption method not supported",zr="Compression method not supported",Sr="Split zip file",vr="utf-8",kr="cp437",xr=[[Gn,A],[Jn,A],[Qn,A],[Yn,T]],_r={[T]:{getValue:Br,bytes:4},[A]:{getValue:Mr,bytes:8}};class Dr{constructor(e,n={}){t.assign(this,{reader:Mn(e),options:n,config:fe()})}async*getEntriesGenerator(e={}){const n=this;let{reader:r}=n;const{config:s}=n;if(await Bn(r),r.size!==re&&r.readUint8Array||(r=new hn(await new l(r.readable).blob()),await Bn(r)),r.size<O)throw new f(fr);r.chunkSize=de(s);const i=await async function(e,t,n,r,s){const i=new d(4);!function(e,t,n){e.setUint32(t,n,!0)}(qr(i),0,t);const o=r+s;return await c(r)||await c(a.min(o,n));async function c(t){const s=n-t,a=await Nn(e,s,t);for(let e=a.length-r;e>=0;e--)if(a[e]==i[0]&&a[e+1]==i[1]&&a[e+2]==i[2]&&a[e+3]==i[3])return{offset:s+e,buffer:a.slice(e,e+r).buffer}}}(r,N,r.size,O,1048560);if(!i){throw Br(qr(await Nn(r,0,4)))==B?new f(Sr):new f(dr)}const o=qr(i);let c=Br(o,12),u=Br(o,16);const h=i.offset,p=Hr(o,20),w=h+O+p;let g=Hr(o,4);const y=r.lastDiskNumber||0;let b=Hr(o,6),z=Hr(o,8),S=0,v=0;if(u==A||c==A||z==T||b==T){const e=qr(await Nn(r,i.offset-20,20));if(Br(e,0)!=I)throw new f(hr);u=Mr(e,8);let t=await Nn(r,u,56,-1),n=qr(t);const s=i.offset-20-56;if(Br(n,0)!=L&&u!=s){const e=u;u=s,S=u-e,t=await Nn(r,u,56,-1),n=qr(t)}if(Br(n,0)!=L)throw new f(pr);g==T&&(g=Br(n,16)),b==T&&(b=Br(n,20)),z==T&&(z=Mr(n,32)),c==A&&(c=Mr(n,40)),u-=c}if(y!=g)throw new f(Sr);if(u<0||u>=r.size)throw new f(fr);let k=0,x=await Nn(r,u,c,b),_=qr(x);if(c){const e=i.offset-c;if(Br(_,k)!=q&&u!=e){const t=u;u=e,S=u-t,x=await Nn(r,u,c,b),_=qr(x)}}const D=i.offset-u-(r.lastDiskOffset||0);if(c!=D&&D>=0&&(c=D,x=await Nn(r,u,c,b),_=qr(x)),u<0||u>=r.size)throw new f(fr);const C=Tr(n,e,"filenameEncoding"),F=Tr(n,e,"commentEncoding");for(let i=0;i<z;i++){const o=new Cr(r,s,n.options);if(Br(_,k)!=q)throw new f(wr);Fr(o,_,k+6);const c=Boolean(o.bitFlag.languageEncodingFlag),l=k+46,u=l+o.filenameLength,d=u+o.extraFieldLength,h=Hr(_,k+4),p=0==(0&h),w=x.subarray(l,u),g=Hr(_,k+32),y=d+g,b=x.subarray(d,y),D=c,E=c,A=p&&16==(16&Rr(_,k+38)),T=Br(_,k+42)+S;t.assign(o,{versionMadeBy:h,msDosCompatible:p,compressedSize:0,uncompressedSize:0,commentLength:g,directory:A,offset:T,diskNumberStart:Hr(_,k+34),internalFileAttribute:Hr(_,k+36),externalFileAttribute:Br(_,k+38),rawFilename:w,filenameUTF8:D,commentUTF8:E,rawExtraField:x.subarray(u,d)});const[W,U]=await m.all([Pn(w,D?vr:C||kr),Pn(b,E?vr:F||kr)]);t.assign(o,{rawComment:b,filename:W,comment:U,directory:A||W.endsWith(ee)}),v=a.max(T,v),await Er(o,o,_,k+6);const R=new ur(o);R.getData=(e,t)=>o.getData(e,R,t),k=y;const{onprogress:H}=e;if(H)try{await H(i+1,z,new ur(o))}catch(e){}yield R}const E=Tr(n,e,"extractPrependedData"),W=Tr(n,e,"extractAppendedData");return E&&(n.prependedData=v>0?await Nn(r,0,v):new d),n.comment=p?await Nn(r,h+O,p):new d,W&&(n.appendedData=w<r.size?await Nn(r,w,r.size-w):new d),!0}async getEntries(e={}){const t=[];for await(const n of this.getEntriesGenerator(e))t.push(n);return t}async close(){}}class Cr{constructor(e,n,r){t.assign(this,{reader:e,config:n,options:r})}async getData(e,n,r={}){const s=this,{reader:a,offset:i,diskNumberStart:o,extraFieldAES:c,compressionMethod:l,config:u,bitFlag:h,signature:p,rawLastModDate:w,uncompressedSize:g,compressedSize:m}=s,y=n.localDirectory={},b=qr(await Nn(a,i,30,o));let z=Tr(s,r,"password");if(z=z&&z.length&&z,c&&c.originalCompressionMethod!=R)throw new f(zr);if(l!=U&&l!=W)throw new f(zr);if(Br(b,0)!=H)throw new f(gr);Fr(y,b,4),y.rawExtraField=y.extraFieldLength?await Nn(a,i+30+y.filenameLength,y.extraFieldLength,o):new d,await Er(s,y,b,4,!0),t.assign(n,{lastAccessDate:y.lastAccessDate,creationDate:y.creationDate});const S=s.encrypted&&y.encrypted,v=S&&!c;if(S){if(!v&&c.strength===re)throw new f(br);if(!z)throw new f(yr)}const k=i+30+y.filenameLength+y.extraFieldLength,x=m,D=a.readable;t.assign(D,{diskNumberStart:o,offset:k,size:x});const C=Tr(s,r,"signal"),F=Tr(s,r,"checkPasswordOnly");F&&(e=new _),e=qn(e),await Bn(e,g);const{writable:E}=e,{onstart:A,onprogress:T,onend:B}=r,M={options:{codecType:Ut,password:z,zipCrypto:v,encryptionStrength:c&&c.strength,signed:Tr(s,r,"checkSignature"),passwordVerification:v&&(h.dataDescriptor?w>>>8&255:p>>>24&255),signature:p,compressed:0!=l,encrypted:S,useWebWorkers:Tr(s,r,"useWebWorkers"),useCompressionStream:Tr(s,r,"useCompressionStream"),transferStreams:Tr(s,r,"transferStreams"),checkPasswordOnly:F},config:u,streamOptions:{signal:C,size:x,onstart:A,onprogress:T,onend:B}};let q=0;try{({outputSize:q}=await Zt({readable:D,writable:E},M))}catch(e){if(!F||e.message!=We)throw e}finally{const e=Tr(s,r,"preventClose");E.size+=q,e||E.locked||await E.getWriter().close()}return F?void 0:e.getData?e.getData():E}}function Fr(e,n,r){const s=e.rawBitFlag=Hr(n,r+2),a=(s&G)==G,i=Br(n,r+6);t.assign(e,{encrypted:a,version:Hr(n,r),bitFlag:{level:(6&s)>>1,dataDescriptor:(s&J)==J,languageEncodingFlag:(s&Q)==Q},rawLastModDate:i,lastModDate:Wr(i),filenameLength:Hr(n,r+22),extraFieldLength:Hr(n,r+24)})}async function Er(e,n,r,s,a){const{rawExtraField:c}=n,l=n.extraField=new o,u=qr(new d(c));let h=0;try{for(;h<c.length;){const e=Hr(u,h),t=Hr(u,h+2);l.set(e,{type:e,data:c.slice(h+4,h+4+t)}),h+=4+t}}catch(e){}const p=Hr(r,s+4);t.assign(n,{signature:Br(r,s+10),uncompressedSize:Br(r,s+18),compressedSize:Br(r,s+14)});const w=l.get(V);w&&(!function(e,t){t.zip64=!0;const n=qr(e.data),r=xr.filter((([e,n])=>t[e]==n));for(let s=0,a=0;s<r.length;s++){const[i,o]=r[s];if(t[i]==o){const r=_r[o];t[i]=e[i]=r.getValue(n,a),a+=r.bytes}else if(e[i])throw new f(mr)}}(w,n),n.extraFieldZip64=w);const g=l.get(28789);g&&(await Ar(g,Kn,jn,n,e),n.extraFieldUnicodePath=g);const m=l.get(25461);m&&(await Ar(m,Xn,Zn,n,e),n.extraFieldUnicodeComment=m);const y=l.get(P);y?(!function(e,n,r){const s=qr(e.data),a=Rr(s,4);t.assign(e,{vendorVersion:Rr(s,0),vendorId:Rr(s,2),strength:a,originalCompressionMethod:r,compressionMethod:Hr(s,5)}),n.compressionMethod=e.compressionMethod}(y,n,p),n.extraFieldAES=y):n.compressionMethod=p;const b=l.get(K);b&&(!function(e,n){const r=qr(e.data);let s,a=4;try{for(;a<e.data.length&&!s;){const t=Hr(r,a),n=Hr(r,a+2);t==j&&(s=e.data.slice(a+4,a+4+n)),a+=4+n}}catch(e){}try{if(s&&24==s.length){const r=qr(s),a=r.getBigUint64(0,!0),i=r.getBigUint64(8,!0),o=r.getBigUint64(16,!0);t.assign(e,{rawLastModDate:a,rawLastAccessDate:i,rawCreationDate:o});const c=Ur(a),l=Ur(i),u={lastModDate:c,lastAccessDate:l,creationDate:Ur(o)};t.assign(e,u),t.assign(n,u)}}catch(e){}}(b,n),n.extraFieldNTFS=b);const z=l.get(X);z&&(!function(e,t,n){const r=qr(e.data),s=Rr(r,0),a=[],o=[];n?(1==(1&s)&&(a.push($n),o.push(er)),2==(2&s)&&(a.push(tr),o.push(nr)),4==(4&s)&&(a.push(rr),o.push(sr))):e.data.length>=5&&(a.push($n),o.push(er));let c=1;a.forEach(((n,s)=>{if(e.data.length>=c+4){const a=Br(r,c);t[n]=e[n]=new i(1e3*a);const l=o[s];e[l]=a}c+=4}))}(z,n,a),n.extraFieldExtendedTimestamp=z);const S=l.get(Z);S&&(n.extraFieldUSDZ=S)}async function Ar(e,n,r,s,a){const i=qr(e.data),o=new be;o.append(a[r]);const c=qr(new d(4));c.setUint32(0,o.get(),!0);const l=Br(i,1);t.assign(e,{version:Rr(i,0),[n]:Pn(e.data.subarray(5)),valid:!a.bitFlag.languageEncodingFlag&&l==Br(c,0)}),e.valid&&(s[n]=e[n],s[n+"UTF8"]=!0)}function Tr(e,t,n){return t[n]===re?e.options[n]:t[n]}function Wr(e){const t=(4294901760&e)>>16,n=65535&e;try{return new i(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&n)>>11,(2016&n)>>5,2*(31&n),0)}catch(e){}}function Ur(e){return new i(r(e/s(1e4)-s(116444736e5)))}function Rr(e,t){return e.getUint8(t)}function Hr(e,t){return e.getUint16(t,!0)}function Br(e,t){return e.getUint32(t,!0)}function Mr(e,t){return r(e.getBigUint64(t,!0))}function qr(e){return new w(e.buffer)}const Nr="File already exists",Lr="Zip file comment exceeds 64KB",Ir="File entry comment exceeds 64KB",Or="File entry name exceeds 64KB",Vr="Version exceeds 65535",Pr="The strength must equal 1, 2, or 3",Kr="Extra field type exceeds 65535",jr="Extra field data exceeds 64KB",Xr="Zip64 is not supported (make sure 'keepOrder' is set to 'true')",Zr=new d([7,0,2,0,65,69,3,0,0]);let Gr=0;const Jr=[];class Qr{constructor(e,n={}){e=qn(e),t.assign(this,{writer:e,addSplitZipSignature:e instanceof Hn,options:n,config:fe(),files:new o,filenames:new c,offset:e.writable.size,pendingEntriesSize:0,pendingAddFileCalls:new c,bufferedWrites:0})}async add(n="",r,o={}){const c=this,{pendingAddFileCalls:l,config:u}=c;let g;Gr<u.maxWorkers?Gr++:await new m((e=>Jr.push(e)));try{if(n=n.trim(),c.filenames.has(n))throw new f(Nr);return c.filenames.add(n),g=async function(n,r,o,c){r=r.trim(),c.directory&&!r.endsWith(ee)?r+=ee:c.directory=r.endsWith(ee);const l=Se(r);if(os(l)>T)throw new f(Or);const u=c.comment||"",g=Se(u);if(os(g)>T)throw new f(Ir);const y=es(n,c,"version",20);if(y>T)throw new f(Vr);const b=es(n,c,"versionMadeBy",20);if(b>T)throw new f(Vr);const z=es(n,c,$n,new i),S=es(n,c,tr),v=es(n,c,rr),k=es(n,c,or,!0),x=es(n,c,ar,0),_=es(n,c,ir,0),D=es(n,c,"password"),C=es(n,c,"encryptionStrength",3),F=es(n,c,"zipCrypto"),E=es(n,c,"extendedTimestamp",!0),q=es(n,c,"keepOrder",!0),N=es(n,c,"level"),L=es(n,c,"useWebWorkers"),I=es(n,c,"bufferedWrite"),O=es(n,c,"dataDescriptorSignature",!1),se=es(n,c,"signal"),ae=es(n,c,"useCompressionStream");let ie=es(n,c,"dataDescriptor",!0),oe=es(n,c,cr);if(D!==re&&C!==re&&(C<1||C>3))throw new f(Pr);let ce=new d;const{extraField:le}=c;if(le){let e=0,t=0;le.forEach((t=>e+=4+os(t))),ce=new d(e),le.forEach(((e,n)=>{if(n>T)throw new f(Kr);if(os(e)>T)throw new f(jr);as(ce,new h([n]),t),as(ce,new h([os(e)]),t+2),as(ce,e,t+4),t+=4+os(e)}))}let ue=0,fe=0,he=0;const pe=!0===oe;o&&(o=Mn(o),await Bn(o),o.size===re?(ie=!0,(oe||oe===re)&&(oe=!0,he=ue=A)):(he=o.size,ue=function(e){return e+5*(a.floor(e/16383)+1)}(he)));const{diskOffset:we,diskNumber:ge,maxSize:me}=n.writer,ye=pe||he>=A,be=pe||ue>=A,ze=pe||n.offset+n.pendingEntriesSize-we>=A,ve=es(n,c,"supportZip64SplitFile",!0),ke=ve&&pe||ge+a.ceil(n.pendingEntriesSize/me)>=T;if(ze||ye||be||ke){if(!1===oe||!q)throw new f(Xr);oe=!0}oe=oe||!1,c=t.assign({},c,{rawFilename:l,rawComment:g,version:y,versionMadeBy:b,lastModDate:z,lastAccessDate:S,creationDate:v,rawExtraField:ce,zip64:oe,zip64UncompressedSize:ye,zip64CompressedSize:be,zip64Offset:ze,zip64DiskNumberStart:ke,password:D,level:N,useWebWorkers:L,encryptionStrength:C,extendedTimestamp:E,zipCrypto:F,bufferedWrite:I,keepOrder:q,dataDescriptor:ie,dataDescriptorSignature:O,signal:se,msDosCompatible:k,internalFileAttribute:x,externalFileAttribute:_,useCompressionStream:ae});const xe=function(e){const{rawFilename:t,lastModDate:n,lastAccessDate:r,creationDate:s,password:i,level:o,zip64:c,zipCrypto:l,dataDescriptor:u,directory:f,rawExtraField:h,encryptionStrength:w,extendedTimestamp:g}=e,m=0!==o&&!f,y=Boolean(i&&os(i));let b,z,S,v,k=e.version;if(y&&!l){b=new d(os(Zr)+2);const e=is(b);ns(e,0,P),as(b,Zr,2),ts(e,8,w)}else b=new d;if(g){S=new d(9+(r?4:0)+(s?4:0));const e=is(S);ns(e,0,X),ns(e,2,os(S)-4),v=1+(r?2:0)+(s?4:0),ts(e,4,v);let t=5;rs(e,t,a.floor(n.getTime()/1e3)),t+=4,r&&(rs(e,t,a.floor(r.getTime()/1e3)),t+=4),s&&rs(e,t,a.floor(s.getTime()/1e3));try{z=new d(36);const e=is(z),t=$r(n);ns(e,0,K),ns(e,2,32),ns(e,8,j),ns(e,10,24),ss(e,12,t),ss(e,20,$r(r)||t),ss(e,28,$r(s)||t)}catch(e){z=new d}}else z=S=new d;let x=Q;u&&(x|=J);let _=U;m&&(_=W);c&&(k=k>Y?k:Y);y&&(x|=G,l||(k=k>$?k:$,_=R,m&&(b[9]=W)));const D=new d(26),C=is(D);ns(C,0,k),ns(C,2,x),ns(C,4,_);const F=new p(1),E=is(F);let A;A=n<ne?ne:n>te?te:n;ns(E,0,(A.getHours()<<6|A.getMinutes())<<5|A.getSeconds()/2),ns(E,2,(A.getFullYear()-1980<<4|A.getMonth()+1)<<5|A.getDate());const T=F[0];rs(C,6,T),ns(C,22,os(t));const B=os(b,S,z,h);ns(C,24,B);const M=new d(30+os(t)+B);return rs(is(M),0,H),as(M,D,4),as(M,t,30),as(M,b,30+os(t)),as(M,S,30+os(t,b)),as(M,z,30+os(t,b,S)),as(M,h,30+os(t,b,S,z)),{localHeaderArray:M,headerArray:D,headerView:C,lastModDate:n,rawLastModDate:T,encrypted:y,compressed:m,version:k,compressionMethod:_,extraFieldExtendedTimestampFlag:v,rawExtraFieldExtendedTimestamp:S,rawExtraFieldNTFS:z,rawExtraFieldAES:b,extraFieldLength:B}}(c),_e=function(e){const{zip64:t,dataDescriptor:n,dataDescriptorSignature:r}=e;let s,a=new d,i=0;n&&(a=new d(t?r?24:20:r?16:12),s=is(a),r&&(i=4,rs(s,0,M)));return{dataDescriptorArray:a,dataDescriptorView:s,dataDescriptorOffset:i}}(c),De=os(xe.localHeaderArray,_e.dataDescriptorArray);fe=De+ue,n.options.usdz&&(fe+=fe+64);let Ce;n.pendingEntriesSize+=fe;try{Ce=await async function(n,r,a,i,o){const{files:c,writer:l}=n,{keepOrder:u,dataDescriptor:h,signal:p}=o,{headerInfo:g}=i,{usdz:y}=n.options,b=e.from(c.values()).pop();let z,S,v,k,x,_,D={};c.set(r,D);try{let e;u&&(e=b&&b.lock,C()),!(o.bufferedWrite||n.writerLocked||n.bufferedWrites&&u)&&h||y?(_=l,await F()):(_=new pn,_.writable.size=0,z=!0,n.bufferedWrites++,await Bn(l)),await Bn(_);const{writable:g}=l;let{diskOffset:m}=l;if(n.addSplitZipSignature){delete n.addSplitZipSignature;const e=new d(4);rs(is(e),0,B),await Yr(g,e),n.offset+=4}z||(await e,await E(g));const{diskNumber:S}=l;if(x=!0,D.diskNumberStart=S,y&&function(e,t){const{headerInfo:n}=e;let{localHeaderArray:r,extraFieldLength:s}=n,a=is(r),i=64-(t+r.length)%64;i<4&&(i+=64);const o=new d(i),c=is(o);ns(c,0,Z),ns(c,2,i-2);const l=r;n.localHeaderArray=r=new d(l.length+i),as(r,l),as(r,o,l.length),a=is(r),ns(a,28,s+i),e.metadataSize+=i}(i,n.offset-m),D=await async function(e,n,{diskNumberStart:r,lock:a},i,o,c){const{headerInfo:l,dataDescriptorInfo:u,metadataSize:f}=i,{localHeaderArray:h,headerArray:p,lastModDate:w,rawLastModDate:g,encrypted:m,compressed:y,version:b,compressionMethod:z,rawExtraFieldExtendedTimestamp:S,extraFieldExtendedTimestampFlag:v,rawExtraFieldNTFS:k,rawExtraFieldAES:x}=l,{dataDescriptorArray:_}=u,{rawFilename:D,lastAccessDate:C,creationDate:F,password:E,level:T,zip64:W,zip64UncompressedSize:U,zip64CompressedSize:R,zip64Offset:H,zip64DiskNumberStart:B,zipCrypto:M,dataDescriptor:q,directory:N,versionMadeBy:L,rawComment:I,rawExtraField:O,useWebWorkers:P,onstart:K,onprogress:j,onend:X,signal:Z,encryptionStrength:G,extendedTimestamp:J,msDosCompatible:Q,internalFileAttribute:Y,externalFileAttribute:$,useCompressionStream:ee}=c,te={lock:a,versionMadeBy:L,zip64:W,directory:Boolean(N),filenameUTF8:!0,rawFilename:D,commentUTF8:!0,rawComment:I,rawExtraFieldExtendedTimestamp:S,rawExtraFieldNTFS:k,rawExtraFieldAES:x,rawExtraField:O,extendedTimestamp:J,msDosCompatible:Q,internalFileAttribute:Y,externalFileAttribute:$,diskNumberStart:r};let ne,se=0,ae=0;const{writable:ie}=n;if(e){e.chunkSize=de(o),await Yr(ie,h);const t=e.readable,n=t.size=e.size,r={options:{codecType:Wt,level:T,password:E,encryptionStrength:G,zipCrypto:m&&M,passwordVerification:m&&M&&g>>8&255,signed:!0,compressed:y,encrypted:m,useWebWorkers:P,useCompressionStream:ee,transferStreams:!1},config:o,streamOptions:{signal:Z,size:n,onstart:K,onprogress:j,onend:X}},s=await Zt({readable:t,writable:ie},r);ie.size+=s.size,ne=s.signature,ae=e.size=t.size,se=s.size}else await Yr(ie,h);let oe;if(W){let e=4;U&&(e+=8),R&&(e+=8),H&&(e+=8),B&&(e+=4),oe=new d(e)}else oe=new d;(function(e,t){const{signature:n,rawExtraFieldZip64:r,compressedSize:a,uncompressedSize:i,headerInfo:o,dataDescriptorInfo:c}=e,{headerView:l,encrypted:u}=o,{dataDescriptorView:f,dataDescriptorOffset:d}=c,{zip64:h,zip64UncompressedSize:p,zip64CompressedSize:w,zipCrypto:g,dataDescriptor:m}=t;u&&!g||n===re||(rs(l,10,n),m&&rs(f,d,n));if(h){const e=is(r);ns(e,0,V),ns(e,2,r.length-4);let t=4;p&&(rs(l,18,A),ss(e,t,s(i)),t+=8),w&&(rs(l,14,A),ss(e,t,s(a))),m&&(ss(f,d+4,s(a)),ss(f,d+12,s(i)))}else rs(l,14,a),rs(l,18,i),m&&(rs(f,d+4,a),rs(f,d+8,i))})({signature:ne,rawExtraFieldZip64:oe,compressedSize:se,uncompressedSize:ae,headerInfo:l,dataDescriptorInfo:u},c),q&&await Yr(ie,_);return t.assign(te,{uncompressedSize:ae,compressedSize:se,lastModDate:w,rawLastModDate:g,creationDate:F,lastAccessDate:C,encrypted:m,length:f+se,compressionMethod:z,version:b,headerArray:p,signature:ne,rawExtraFieldZip64:oe,extraFieldExtendedTimestampFlag:v,zip64UncompressedSize:U,zip64CompressedSize:R,zip64Offset:H,zip64DiskNumberStart:B}),te}(a,_,D,i,n.config,o),x=!1,c.set(r,D),D.filename=r,z){await _.writable.getWriter().close();let t=await _.getData();await e,await F(),k=!0,h||(t=await async function(e,t,n,{zipCrypto:r}){let s;s=await t.slice(0,26).arrayBuffer(),26!=s.byteLength&&(s=s.slice(0,26));const a=new w(s);e.encrypted&&!r||rs(a,14,e.signature);e.zip64?(rs(a,18,A),rs(a,22,A)):(rs(a,18,e.compressedSize),rs(a,22,e.uncompressedSize));return await Yr(n,new d(s)),t.slice(s.byteLength)}(D,t,g,o)),await E(g),D.diskNumberStart=l.diskNumber,m=l.diskOffset,await t.stream().pipeTo(g,{preventClose:!0,preventAbort:!0,signal:p}),g.size+=t.size,k=!1}if(D.offset=n.offset-m,D.zip64)!function(e,t){const{rawExtraFieldZip64:n,offset:r,diskNumberStart:a}=e,{zip64UncompressedSize:i,zip64CompressedSize:o,zip64Offset:c,zip64DiskNumberStart:l}=t,u=is(n);let f=4;i&&(f+=8);o&&(f+=8);c&&(ss(u,f,s(r)),f+=8);l&&rs(u,f,a)}(D,o);else if(D.offset>=A)throw new f(Xr);return n.offset+=D.length,D}catch(e){if(z&&k||!z&&x){if(n.hasCorruptedEntries=!0,e)try{e.corruptedEntry=!0}catch(e){}z?n.offset+=_.writable.size:n.offset=_.writable.size}throw c.delete(r),e}finally{z&&n.bufferedWrites--,v&&v(),S&&S()}function C(){D.lock=new m((e=>v=e))}async function F(){n.writerLocked=!0;const{lockWriter:e}=n;n.lockWriter=new m((e=>S=()=>{n.writerLocked=!1,e()})),await e}async function E(e){g.localHeaderArray.length>l.availableSize&&(l.availableSize=0,await Yr(e,new d))}}(n,r,o,{headerInfo:xe,dataDescriptorInfo:_e,metadataSize:De},c)}finally{n.pendingEntriesSize-=fe}return t.assign(Ce,{name:r,comment:u,extraField:le}),new ur(Ce)}(c,n,r,o),l.add(g),await g}catch(e){throw c.filenames.delete(n),e}finally{l.delete(g);const e=Jr.shift();e?e():Gr--}}async close(t=new d,n={}){const{pendingAddFileCalls:r,writer:i}=this,{writable:o}=i;for(;r.size;)await m.all(e.from(r));await async function(t,n,r){const{files:i,writer:o}=t,{diskOffset:c,writable:l}=o;let{diskNumber:u}=o,h=0,p=0,w=t.offset-c,g=i.size;for(const[,e]of i){const{rawFilename:t,rawExtraFieldZip64:n,rawExtraFieldAES:r,rawComment:s,rawExtraFieldNTFS:i,rawExtraField:o,extendedTimestamp:c,extraFieldExtendedTimestampFlag:l,lastModDate:u}=e;let f;if(c){f=new d(9);const e=is(f);ns(e,0,X),ns(e,2,5),ts(e,4,l),rs(e,5,a.floor(u.getTime()/1e3))}else f=new d;e.rawExtraFieldCDExtendedTimestamp=f,p+=46+os(t,s,n,r,i,f,o)}const m=new d(p),y=is(m);await Bn(o);let b=0;for(const[t,n]of e.from(i.values()).entries()){const{offset:e,rawFilename:s,rawExtraFieldZip64:a,rawExtraFieldAES:c,rawExtraFieldCDExtendedTimestamp:u,rawExtraFieldNTFS:f,rawExtraField:d,rawComment:p,versionMadeBy:w,headerArray:g,directory:z,zip64:S,zip64UncompressedSize:v,zip64CompressedSize:k,zip64DiskNumberStart:x,zip64Offset:_,msDosCompatible:D,internalFileAttribute:C,externalFileAttribute:F,diskNumberStart:E,uncompressedSize:W,compressedSize:U}=n,R=os(a,c,u,f,d);rs(y,h,q),ns(y,h+4,w);const H=is(g);v||rs(H,18,W),k||rs(H,14,U),as(m,g,h+6),ns(y,h+30,R),ns(y,h+32,os(p)),ns(y,h+34,S&&x?T:E),ns(y,h+36,C),F?rs(y,h+38,F):z&&D&&ts(y,h+38,16),rs(y,h+42,S&&_?A:e),as(m,s,h+46),as(m,a,h+46+os(s)),as(m,c,h+46+os(s,a)),as(m,u,h+46+os(s,a,c)),as(m,f,h+46+os(s,a,c,u)),as(m,d,h+46+os(s,a,c,u,f)),as(m,p,h+46+os(s)+R);const B=46+os(s,p)+R;if(h-b>o.availableSize&&(o.availableSize=0,await Yr(l,m.slice(b,h)),b=h),h+=B,r.onprogress)try{await r.onprogress(t+1,i.size,new ur(n))}catch(e){}}await Yr(l,b?m.slice(b):m);let z=o.diskNumber;const{availableSize:S}=o;S<O&&z++;let v=es(t,r,"zip64");if(w>=A||p>=A||g>=T||z>=T){if(!1===v)throw new f(Xr);v=!0}const k=new d(v?98:O),x=is(k);if(h=0,v){rs(x,0,L),ss(x,4,s(44)),ns(x,12,45),ns(x,14,45),rs(x,16,z),rs(x,20,u),ss(x,24,s(g)),ss(x,32,s(g)),ss(x,40,s(p)),ss(x,48,s(w)),rs(x,56,I),ss(x,64,s(w)+s(p)),rs(x,72,z+1);es(t,r,"supportZip64SplitFile",!0)&&(z=T,u=T),g=T,w=A,p=A,h+=76}rs(x,h,N),ns(x,h+4,z),ns(x,h+6,u),ns(x,h+8,g),ns(x,h+10,g),rs(x,h+12,p),rs(x,h+16,w);const _=os(n);if(_){if(!(_<=T))throw new f(Lr);ns(x,h+20,_)}await Yr(l,k),_&&await Yr(l,n)}(this,t,n);return es(this,n,"preventClose")||await o.getWriter().close(),i.getData?i.getData():o}}async function Yr(e,t){const n=e.getWriter();await n.ready,e.size+=os(t),await n.write(t),n.releaseLock()}function $r(e){if(e)return(s(e.getTime())+s(116444736e5))*s(1e4)}function es(e,t,n,r){const s=t[n]===re?e.options[n]:t[n];return s===re?r:s}function ts(e,t,n){e.setUint8(t,n)}function ns(e,t,n){e.setUint16(t,n,!0)}function rs(e,t,n){e.setUint32(t,n,!0)}function ss(e,t,n){e.setBigUint64(t,n,!0)}function as(e,t,n){e.set(t,n)}function is(e){return new w(e.buffer)}function os(...e){let t=0;return e.forEach((e=>e&&(t+=e.length))),t}let cs;try{cs=import.meta.url}catch(e){}he({baseURL:cs}),function(e){const t=()=>u.createObjectURL(new g(['const{Array:e,Object:t,Number:n,Math:r,Error:s,Uint8Array:a,Uint16Array:i,Uint32Array:o,Int32Array:l,Map:c,DataView:h,Promise:f,TextEncoder:u,crypto:p,postMessage:d,TransformStream:g,ReadableStream:w,WritableStream:v,CompressionStream:y,DecompressionStream:b}=self;class m{constructor(e){return class extends g{constructor(t,n){const r=new e(n);super({transform(e,t){t.enqueue(r.append(e))},flush(e){const t=r.flush();t&&e.enqueue(t)}})}}}}const _=[];for(let e=0;256>e;e++){let t=e;for(let e=0;8>e;e++)1&t?t=t>>>1^3988292384:t>>>=1;_[e]=t}class k{constructor(e){this.crc=e||-1}append(e){let t=0|this.crc;for(let n=0,r=0|e.length;r>n;n++)t=t>>>8^_[255&(t^e[n])];this.crc=t}get(){return~this.crc}}class S extends g{constructor(){let e;const t=new k;super({transform(e,n){t.append(e),n.enqueue(e)},flush(){const n=new a(4);new h(n.buffer).setUint32(0,t.get()),e.value=n}}),e=this}}const z={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const n=e[e.length-1],r=z.getPartial(n);return 32===r?e.concat(t):z._shiftRight(t,r,0|n,e.slice(0,e.length-1))},bitLength(e){const t=e.length;if(0===t)return 0;const n=e[t-1];return 32*(t-1)+z.getPartial(n)},clamp(e,t){if(32*e.length<t)return e;const n=(e=e.slice(0,r.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=z.partial(t,e[n-1]&2147483648>>t-1,1)),e},partial:(e,t,n)=>32===e?t:(n?0|t:t<<32-e)+1099511627776*e,getPartial:e=>r.round(e/1099511627776)||32,_shiftRight(e,t,n,r){for(void 0===r&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(let s=0;s<e.length;s++)r.push(n|e[s]>>>t),n=e[s]<<32-t;const s=e.length?e[e.length-1]:0,a=z.getPartial(s);return r.push(z.partial(t+a&31,t+a>32?n:r.pop(),1)),r}},D={bytes:{fromBits(e){const t=z.bitLength(e)/8,n=new a(t);let r;for(let s=0;t>s;s++)0==(3&s)&&(r=e[s/4]),n[s]=r>>>24,r<<=8;return n},toBits(e){const t=[];let n,r=0;for(n=0;n<e.length;n++)r=r<<8|e[n],3==(3&n)&&(t.push(r),r=0);return 3&n&&t.push(z.partial(8*(3&n),r)),t}}},C=class{constructor(e){const t=this;t.blockSize=512,t._init=[1732584193,4023233417,2562383102,271733878,3285377520],t._key=[1518500249,1859775393,2400959708,3395469782],e?(t._h=e._h.slice(0),t._buffer=e._buffer.slice(0),t._length=e._length):t.reset()}reset(){const e=this;return e._h=e._init.slice(0),e._buffer=[],e._length=0,e}update(e){const t=this;"string"==typeof e&&(e=D.utf8String.toBits(e));const n=t._buffer=z.concat(t._buffer,e),r=t._length,a=t._length=r+z.bitLength(e);if(a>9007199254740991)throw new s("Cannot hash more than 2^53 - 1 bits");const i=new o(n);let l=0;for(let e=t.blockSize+r-(t.blockSize+r&t.blockSize-1);a>=e;e+=t.blockSize)t._block(i.subarray(16*l,16*(l+1))),l+=1;return n.splice(0,16*l),t}finalize(){const e=this;let t=e._buffer;const n=e._h;t=z.concat(t,[z.partial(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(r.floor(e._length/4294967296)),t.push(0|e._length);t.length;)e._block(t.splice(0,16));return e.reset(),n}_f(e,t,n,r){return e>19?e>39?e>59?e>79?void 0:t^n^r:t&n|t&r|n&r:t^n^r:t&n|~t&r}_S(e,t){return t<<e|t>>>32-e}_block(t){const n=this,s=n._h,a=e(80);for(let e=0;16>e;e++)a[e]=t[e];let i=s[0],o=s[1],l=s[2],c=s[3],h=s[4];for(let e=0;79>=e;e++){16>e||(a[e]=n._S(1,a[e-3]^a[e-8]^a[e-14]^a[e-16]));const t=n._S(5,i)+n._f(e,o,l,c)+h+a[e]+n._key[r.floor(e/20)]|0;h=c,c=l,l=n._S(30,o),o=i,i=t}s[0]=s[0]+i|0,s[1]=s[1]+o|0,s[2]=s[2]+l|0,s[3]=s[3]+c|0,s[4]=s[4]+h|0}},I={getRandomValues(e){const t=new o(e.buffer),n=e=>{let t=987654321;const n=4294967295;return()=>(t=36969*(65535&t)+(t>>16)&n,(((t<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(r.random()>.5?1:-1))};for(let s,a=0;a<e.length;a+=4){const e=n(4294967296*(s||r.random()));s=987654071*e(),t[a/4]=4294967296*e()|0}return e}},x={importKey:e=>new x.hmacSha1(D.bytes.toBits(e)),pbkdf2(e,t,n,r){if(n=n||1e4,0>r||0>n)throw new s("invalid params to pbkdf2");const a=1+(r>>5)<<2;let i,o,l,c,f;const u=new ArrayBuffer(a),p=new h(u);let d=0;const g=z;for(t=D.bytes.toBits(t),f=1;(a||1)>d;f++){for(i=o=e.encrypt(g.concat(t,[f])),l=1;n>l;l++)for(o=e.encrypt(o),c=0;c<o.length;c++)i[c]^=o[c];for(l=0;(a||1)>d&&l<i.length;l++)p.setInt32(d,i[l]),d+=4}return u.slice(0,r/8)},hmacSha1:class{constructor(e){const t=this,n=t._hash=C,r=[[],[]];t._baseHash=[new n,new n];const s=t._baseHash[0].blockSize/32;e.length>s&&(e=(new n).update(e).finalize());for(let t=0;s>t;t++)r[0][t]=909522486^e[t],r[1][t]=1549556828^e[t];t._baseHash[0].update(r[0]),t._baseHash[1].update(r[1]),t._resultHash=new n(t._baseHash[0])}reset(){const e=this;e._resultHash=new e._hash(e._baseHash[0]),e._updated=!1}update(e){this._updated=!0,this._resultHash.update(e)}digest(){const e=this,t=e._resultHash.finalize(),n=new e._hash(e._baseHash[1]).update(t).finalize();return e.reset(),n}encrypt(e){if(this._updated)throw new s("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},A=void 0!==p&&"function"==typeof p.getRandomValues,T="Invalid password",R="Invalid signature",H="zipjs-abort-check-password";function q(e){return A?p.getRandomValues(e):I.getRandomValues(e)}const B=16,K={name:"PBKDF2"},V=t.assign({hash:{name:"HMAC"}},K),P=t.assign({iterations:1e3,hash:{name:"SHA-1"}},K),E=["deriveBits"],U=[8,12,16],W=[16,24,32],M=10,N=[0,0,0,0],O="undefined",F="function",L=typeof p!=O,j=L&&p.subtle,G=L&&typeof j!=O,X=D.bytes,J=class{constructor(e){const t=this;t._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],t._tables[0][0][0]||t._precompute();const n=t._tables[0][4],r=t._tables[1],a=e.length;let i,o,l,c=1;if(4!==a&&6!==a&&8!==a)throw new s("invalid aes key size");for(t._key=[o=e.slice(0),l=[]],i=a;4*a+28>i;i++){let e=o[i-1];(i%a==0||8===a&&i%a==4)&&(e=n[e>>>24]<<24^n[e>>16&255]<<16^n[e>>8&255]<<8^n[255&e],i%a==0&&(e=e<<8^e>>>24^c<<24,c=c<<1^283*(c>>7))),o[i]=o[i-a]^e}for(let e=0;i;e++,i--){const t=o[3&e?i:i-4];l[e]=4>=i||4>e?t:r[0][n[t>>>24]]^r[1][n[t>>16&255]]^r[2][n[t>>8&255]]^r[3][n[255&t]]}}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){const e=this._tables[0],t=this._tables[1],n=e[4],r=t[4],s=[],a=[];let i,o,l,c;for(let e=0;256>e;e++)a[(s[e]=e<<1^283*(e>>7))^e]=e;for(let h=i=0;!n[h];h^=o||1,i=a[i]||1){let a=i^i<<1^i<<2^i<<3^i<<4;a=a>>8^255&a^99,n[h]=a,r[a]=h,c=s[l=s[o=s[h]]];let f=16843009*c^65537*l^257*o^16843008*h,u=257*s[a]^16843008*a;for(let n=0;4>n;n++)e[n][h]=u=u<<24^u>>>8,t[n][a]=f=f<<24^f>>>8}for(let n=0;5>n;n++)e[n]=e[n].slice(0),t[n]=t[n].slice(0)}_crypt(e,t){if(4!==e.length)throw new s("invalid aes block size");const n=this._key[t],r=n.length/4-2,a=[0,0,0,0],i=this._tables[t],o=i[0],l=i[1],c=i[2],h=i[3],f=i[4];let u,p,d,g=e[0]^n[0],w=e[t?3:1]^n[1],v=e[2]^n[2],y=e[t?1:3]^n[3],b=4;for(let e=0;r>e;e++)u=o[g>>>24]^l[w>>16&255]^c[v>>8&255]^h[255&y]^n[b],p=o[w>>>24]^l[v>>16&255]^c[y>>8&255]^h[255&g]^n[b+1],d=o[v>>>24]^l[y>>16&255]^c[g>>8&255]^h[255&w]^n[b+2],y=o[y>>>24]^l[g>>16&255]^c[w>>8&255]^h[255&v]^n[b+3],b+=4,g=u,w=p,v=d;for(let e=0;4>e;e++)a[t?3&-e:e]=f[g>>>24]<<24^f[w>>16&255]<<16^f[v>>8&255]<<8^f[255&y]^n[b++],u=g,g=w,w=v,v=y,y=u;return a}},Q=class{constructor(e,t){this._prf=e,this._initIv=t,this._iv=t}reset(){this._iv=this._initIv}update(e){return this.calculate(this._prf,e,this._iv)}incWord(e){if(255==(e>>24&255)){let t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}incCounter(e){0===(e[0]=this.incWord(e[0]))&&(e[1]=this.incWord(e[1]))}calculate(e,t,n){let r;if(!(r=t.length))return[];const s=z.bitLength(t);for(let s=0;r>s;s+=4){this.incCounter(n);const r=e.encrypt(n);t[s]^=r[0],t[s+1]^=r[1],t[s+2]^=r[2],t[s+3]^=r[3]}return z.clamp(t,s)}},Y=x.hmacSha1;let Z=L&&G&&typeof j.importKey==F,$=L&&G&&typeof j.deriveBits==F;class ee extends g{constructor({password:e,signed:n,encryptionStrength:r,checkPasswordOnly:i}){super({start(){t.assign(this,{ready:new f((e=>this.resolveReady=e)),password:e,signed:n,strength:r-1,pending:new a})},async transform(e,t){const n=this,{password:r,strength:o,resolveReady:l,ready:c}=n;r?(await(async(e,t,n,r)=>{const a=await re(e,t,n,ae(r,0,U[t])),i=ae(r,U[t]);if(a[0]!=i[0]||a[1]!=i[1])throw new s(T)})(n,o,r,ae(e,0,U[o]+2)),e=ae(e,U[o]+2),i?t.error(new s(H)):l()):await c;const h=new a(e.length-M-(e.length-M)%B);t.enqueue(ne(n,e,h,0,M,!0))},async flush(e){const{signed:t,ctr:n,hmac:r,pending:i,ready:o}=this;await o;const l=ae(i,0,i.length-M),c=ae(i,i.length-M);let h=new a;if(l.length){const e=oe(X,l);r.update(e);const t=n.update(e);h=ie(X,t)}if(t){const e=ae(ie(X,r.digest()),0,M);for(let t=0;M>t;t++)if(e[t]!=c[t])throw new s(R)}e.enqueue(h)}})}}class te extends g{constructor({password:e,encryptionStrength:n}){let r;super({start(){t.assign(this,{ready:new f((e=>this.resolveReady=e)),password:e,strength:n-1,pending:new a})},async transform(e,t){const n=this,{password:r,strength:s,resolveReady:i,ready:o}=n;let l=new a;r?(l=await(async(e,t,n)=>{const r=q(new a(U[t]));return se(r,await re(e,t,n,r))})(n,s,r),i()):await o;const c=new a(l.length+e.length-e.length%B);c.set(l,0),t.enqueue(ne(n,e,c,l.length,0))},async flush(e){const{ctr:t,hmac:n,pending:s,ready:i}=this;await i;let o=new a;if(s.length){const e=t.update(oe(X,s));n.update(e),o=ie(X,e)}r.signature=ie(X,n.digest()).slice(0,M),e.enqueue(se(o,r.signature))}}),r=this}}function ne(e,t,n,r,s,i){const{ctr:o,hmac:l,pending:c}=e,h=t.length-s;let f;for(c.length&&(t=se(c,t),n=((e,t)=>{if(t&&t>e.length){const n=e;(e=new a(t)).set(n,0)}return e})(n,h-h%B)),f=0;h-B>=f;f+=B){const e=oe(X,ae(t,f,f+B));i&&l.update(e);const s=o.update(e);i||l.update(s),n.set(ie(X,s),f+r)}return e.pending=ae(t,f),n}async function re(n,r,s,i){n.password=null;const o=(e=>{if(void 0===u){const t=new a((e=unescape(encodeURIComponent(e))).length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new u).encode(e)})(s),l=await(async(e,t,n,r,s)=>{if(!Z)return x.importKey(t);try{return await j.importKey("raw",t,n,!1,s)}catch(e){return Z=!1,x.importKey(t)}})(0,o,V,0,E),c=await(async(e,t,n)=>{if(!$)return x.pbkdf2(t,e.salt,P.iterations,n);try{return await j.deriveBits(e,t,n)}catch(r){return $=!1,x.pbkdf2(t,e.salt,P.iterations,n)}})(t.assign({salt:i},P),l,8*(2*W[r]+2)),h=new a(c),f=oe(X,ae(h,0,W[r])),p=oe(X,ae(h,W[r],2*W[r])),d=ae(h,2*W[r]);return t.assign(n,{keys:{key:f,authentication:p,passwordVerification:d},ctr:new Q(new J(f),e.from(N)),hmac:new Y(p)}),d}function se(e,t){let n=e;return e.length+t.length&&(n=new a(e.length+t.length),n.set(e,0),n.set(t,e.length)),n}function ae(e,t,n){return e.subarray(t,n)}function ie(e,t){return e.fromBits(t)}function oe(e,t){return e.toBits(t)}class le extends g{constructor({password:e,passwordVerification:n,checkPasswordOnly:r}){super({start(){t.assign(this,{password:e,passwordVerification:n}),ue(this,e)},transform(e,t){const n=this;if(n.password){const t=he(n,e.subarray(0,12));if(n.password=null,t[11]!=n.passwordVerification)throw new s(T);e=e.subarray(12)}r?t.error(new s(H)):t.enqueue(he(n,e))}})}}class ce extends g{constructor({password:e,passwordVerification:n}){super({start(){t.assign(this,{password:e,passwordVerification:n}),ue(this,e)},transform(e,t){const n=this;let r,s;if(n.password){n.password=null;const t=q(new a(12));t[11]=n.passwordVerification,r=new a(e.length+t.length),r.set(fe(n,t),0),s=12}else r=new a(e.length),s=0;r.set(fe(n,e),s),t.enqueue(r)}})}}function he(e,t){const n=new a(t.length);for(let r=0;r<t.length;r++)n[r]=de(e)^t[r],pe(e,n[r]);return n}function fe(e,t){const n=new a(t.length);for(let r=0;r<t.length;r++)n[r]=de(e)^t[r],pe(e,t[r]);return n}function ue(e,n){const r=[305419896,591751049,878082192];t.assign(e,{keys:r,crcKey0:new k(r[0]),crcKey2:new k(r[2])});for(let t=0;t<n.length;t++)pe(e,n.charCodeAt(t))}function pe(e,t){let[n,s,a]=e.keys;e.crcKey0.append([t]),n=~e.crcKey0.get(),s=we(r.imul(we(s+ge(n)),134775813)+1),e.crcKey2.append([s>>>24]),a=~e.crcKey2.get(),e.keys=[n,s,a]}function de(e){const t=2|e.keys[2];return ge(r.imul(t,1^t)>>>8)}function ge(e){return 255&e}function we(e){return 4294967295&e}const ve="deflate-raw";class ye extends g{constructor(e,{chunkSize:t,CompressionStream:n,CompressionStreamNative:r}){super({});const{compressed:s,encrypted:a,useCompressionStream:i,zipCrypto:o,signed:l,level:c}=e,f=this;let u,p,d=me(super.readable);a&&!o||!l||(u=new S,d=Se(d,u)),s&&(d=ke(d,i,{level:c,chunkSize:t},r,n)),a&&(o?d=Se(d,new ce(e)):(p=new te(e),d=Se(d,p))),_e(f,d,(()=>{let e;a&&!o&&(e=p.signature),a&&!o||!l||(e=new h(u.value.buffer).getUint32(0)),f.signature=e}))}}class be extends g{constructor(e,{chunkSize:t,DecompressionStream:n,DecompressionStreamNative:r}){super({});const{zipCrypto:a,encrypted:i,signed:o,signature:l,compressed:c,useCompressionStream:f}=e;let u,p,d=me(super.readable);i&&(a?d=Se(d,new le(e)):(p=new ee(e),d=Se(d,p))),c&&(d=ke(d,f,{chunkSize:t},r,n)),i&&!a||!o||(u=new S,d=Se(d,u)),_e(this,d,(()=>{if((!i||a)&&o){const e=new h(u.value.buffer);if(l!=e.getUint32(0,!1))throw new s(R)}}))}}function me(e){return Se(e,new g({transform(e,t){e&&e.length&&t.enqueue(e)}}))}function _e(e,n,r){n=Se(n,new g({flush:r})),t.defineProperty(e,"readable",{get:()=>n})}function ke(e,t,n,r,s){try{e=Se(e,new(t&&r?r:s)(ve,n))}catch(r){if(!t)throw r;e=Se(e,new s(ve,n))}return e}function Se(e,t){return e.pipeThrough(t)}const ze="data";class De extends g{constructor(e,n){super({});const r=this,{codecType:s}=e;let a;s.startsWith("deflate")?a=ye:s.startsWith("inflate")&&(a=be);let i=0;const o=new a(e,n),l=super.readable,c=new g({transform(e,t){e&&e.length&&(i+=e.length,t.enqueue(e))},flush(){const{signature:e}=o;t.assign(r,{signature:e,size:i})}});t.defineProperty(r,"readable",{get:()=>l.pipeThrough(o).pipeThrough(c)})}}const Ce=new c,Ie=new c;let xe=0;async function Ae(e){try{const{options:t,scripts:r,config:s}=e;r&&r.length&&importScripts.apply(void 0,r),self.initCodec&&self.initCodec(),s.CompressionStreamNative=self.CompressionStream,s.DecompressionStreamNative=self.DecompressionStream,self.Deflate&&(s.CompressionStream=new m(self.Deflate)),self.Inflate&&(s.DecompressionStream=new m(self.Inflate));const a={highWaterMark:1,size:()=>s.chunkSize},i=e.readable||new w({async pull(e){const t=new f((e=>Ce.set(xe,e)));Te({type:"pull",messageId:xe}),xe=(xe+1)%n.MAX_SAFE_INTEGER;const{value:r,done:s}=await t;e.enqueue(r),s&&e.close()}},a),o=e.writable||new v({async write(e){let t;const r=new f((e=>t=e));Ie.set(xe,t),Te({type:ze,value:e,messageId:xe}),xe=(xe+1)%n.MAX_SAFE_INTEGER,await r}},a),l=new De(t,s);await i.pipeThrough(l).pipeTo(o,{preventClose:!0,preventAbort:!0});try{await o.getWriter().close()}catch(e){}const{signature:c,size:h}=l;Te({type:"close",result:{signature:c,size:h}})}catch(e){Re(e)}}function Te(e){let{value:t}=e;if(t)if(t.length)try{t=new a(t),e.value=t.buffer,d(e,[e.value])}catch(t){d(e)}else d(e);else d(e)}function Re(e=new s("Unknown error")){const{message:t,stack:n,code:r,name:a}=e;d({error:{message:t,stack:n,code:r,name:a}})}addEventListener("message",(({data:e})=>{const{type:t,messageId:n,value:r,done:s}=e;try{if("start"==t&&Ae(e),t==ze){const e=Ce.get(n);Ce.delete(n),e({value:new a(r),done:s})}if("ack"==t){const e=Ie.get(n);Ie.delete(n),e()}}catch(e){Re(e)}}));var He=a,qe=i,Be=l,Ke=new He([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ve=new He([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Pe=new He([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ee=(e,t)=>{for(var n=new qe(31),r=0;31>r;++r)n[r]=t+=1<<e[r-1];var s=new Be(n[30]);for(r=1;30>r;++r)for(var a=n[r];a<n[r+1];++a)s[a]=a-n[r]<<5|r;return{b:n,r:s}},Ue=Ee(Ke,2),We=Ue.b,Me=Ue.r;We[28]=258,Me[258]=28;for(var Ne=Ee(Ve,0),Oe=Ne.b,Fe=Ne.r,Le=new qe(32768),je=0;32768>je;++je){var Ge=(43690&je)>>1|(21845&je)<<1;Ge=(61680&(Ge=(52428&Ge)>>2|(13107&Ge)<<2))>>4|(3855&Ge)<<4,Le[je]=((65280&Ge)>>8|(255&Ge)<<8)>>1}var Xe=(e,t,n)=>{for(var r=e.length,s=0,a=new qe(t);r>s;++s)e[s]&&++a[e[s]-1];var i,o=new qe(t);for(s=1;t>s;++s)o[s]=o[s-1]+a[s-1]<<1;if(n){i=new qe(1<<t);var l=15-t;for(s=0;r>s;++s)if(e[s])for(var c=s<<4|e[s],h=t-e[s],f=o[e[s]-1]++<<h,u=f|(1<<h)-1;u>=f;++f)i[Le[f]>>l]=c}else for(i=new qe(r),s=0;r>s;++s)e[s]&&(i[s]=Le[o[e[s]-1]++]>>15-e[s]);return i},Je=new He(288);for(je=0;144>je;++je)Je[je]=8;for(je=144;256>je;++je)Je[je]=9;for(je=256;280>je;++je)Je[je]=7;for(je=280;288>je;++je)Je[je]=8;var Qe=new He(32);for(je=0;32>je;++je)Qe[je]=5;var Ye=Xe(Je,9,0),Ze=Xe(Je,9,1),$e=Xe(Qe,5,0),et=Xe(Qe,5,1),tt=e=>{for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},nt=(e,t,n)=>{var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},rt=(e,t)=>{var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},st=e=>(e+7)/8|0,at=(e,t,n)=>{(null==t||0>t)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new He(n-t);return r.set(e.subarray(t,n)),r},it=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ot=(e,t,n)=>{var r=new s(t||it[e]);if(r.code=e,s.captureStackTrace&&s.captureStackTrace(r,ot),!n)throw r;return r},lt=(e,t,n)=>{n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},ct=(e,t,n)=>{n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},ht=(e,t)=>{for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var s=n.length,a=n.slice();if(!s)return{t:vt,l:0};if(1==s){var i=new He(n[0].s+1);return i[n[0].s]=1,{t:i,l:1}}n.sort(((e,t)=>e.f-t.f)),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,h=1,f=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};h!=s-1;)o=n[n[c].f<n[f].f?c++:f++],l=n[c!=h&&n[c].f<n[f].f?c++:f++],n[h++]={s:-1,f:o.f+l.f,l:o,r:l};var u=a[0].s;for(r=1;s>r;++r)a[r].s>u&&(u=a[r].s);var p=new qe(u+1),d=ft(n[h-1],p,0);if(d>t){r=0;var g=0,w=d-t,v=1<<w;for(a.sort(((e,t)=>p[t.s]-p[e.s]||e.f-t.f));s>r;++r){var y=a[r].s;if(p[y]<=t)break;g+=v-(1<<d-p[y]),p[y]=t}for(g>>=w;g>0;){var b=a[r].s;p[b]<t?g-=1<<t-p[b]++-1:++r}for(;r>=0&&g;--r){var m=a[r].s;p[m]==t&&(--p[m],++g)}d=t}return{t:new He(p),l:d}},ft=(e,t,n)=>-1==e.s?r.max(ft(e.l,t,n+1),ft(e.r,t,n+1)):t[e.s]=n,ut=e=>{for(var t=e.length;t&&!e[--t];);for(var n=new qe(++t),r=0,s=e[0],a=1,i=e=>{n[r++]=e},o=1;t>=o;++o)if(e[o]==s&&o!=t)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=e[o]}return{c:n.subarray(0,r),n:t}},pt=(e,t)=>{for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},dt=(e,t,n)=>{var r=n.length,s=st(t+2);e[s]=255&r,e[s+1]=r>>8,e[s+2]=255^e[s],e[s+3]=255^e[s+1];for(var a=0;r>a;++a)e[s+a+4]=n[a];return 8*(s+4+r)},gt=(e,t,n,r,s,a,i,o,l,c,h)=>{lt(t,h++,n),++s[256];for(var f=ht(s,15),u=f.t,p=f.l,d=ht(a,15),g=d.t,w=d.l,v=ut(u),y=v.c,b=v.n,m=ut(g),_=m.c,k=m.n,S=new qe(19),z=0;z<y.length;++z)++S[31&y[z]];for(z=0;z<_.length;++z)++S[31&_[z]];for(var D=ht(S,7),C=D.t,I=D.l,x=19;x>4&&!C[Pe[x-1]];--x);var A,T,R,H,q=c+5<<3,B=pt(s,Je)+pt(a,Qe)+i,K=pt(s,u)+pt(a,g)+i+14+3*x+pt(S,C)+2*S[16]+3*S[17]+7*S[18];if(l>=0&&B>=q&&K>=q)return dt(t,h,e.subarray(l,l+c));if(lt(t,h,1+(B>K)),h+=2,B>K){A=Xe(u,p,0),T=u,R=Xe(g,w,0),H=g;var V=Xe(C,I,0);for(lt(t,h,b-257),lt(t,h+5,k-1),lt(t,h+10,x-4),h+=14,z=0;x>z;++z)lt(t,h+3*z,C[Pe[z]]);h+=3*x;for(var P=[y,_],E=0;2>E;++E){var U=P[E];for(z=0;z<U.length;++z){var W=31&U[z];lt(t,h,V[W]),h+=C[W],W>15&&(lt(t,h,U[z]>>5&127),h+=U[z]>>12)}}}else A=Ye,T=Je,R=$e,H=Qe;for(z=0;o>z;++z){var M=r[z];if(M>255){ct(t,h,A[257+(W=M>>18&31)]),h+=T[W+257],W>7&&(lt(t,h,M>>23&31),h+=Ke[W]);var N=31&M;ct(t,h,R[N]),h+=H[N],N>3&&(ct(t,h,M>>5&8191),h+=Ve[N])}else ct(t,h,A[M]),h+=T[M]}return ct(t,h,A[256]),h+T[256]},wt=new Be([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),vt=new He(0),yt=function(){function e(e,t){if("function"==typeof e&&(t=e,e={}),this.ondata=t,this.o=e||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new He(98304),this.o.dictionary){var n=this.o.dictionary.subarray(-32768);this.b.set(n,32768-n.length),this.s.i=32768-n.length}}return e.prototype.p=function(e,t){this.ondata(((e,t,n,s,a)=>{if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new He(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return((e,t,n,s,a,i)=>{var o=i.z||e.length,l=new He(0+o+5*(1+r.ceil(o/7e3))+0),c=l.subarray(0,l.length-0),h=i.l,f=7&(i.r||0);if(t){f&&(c[0]=i.r>>3);for(var u=wt[t-1],p=u>>13,d=8191&u,g=(1<<n)-1,w=i.p||new qe(32768),v=i.h||new qe(g+1),y=r.ceil(n/3),b=2*y,m=t=>(e[t]^e[t+1]<<y^e[t+2]<<b)&g,_=new Be(25e3),k=new qe(288),S=new qe(32),z=0,D=0,C=i.i||0,I=0,x=i.w||0,A=0;o>C+2;++C){var T=m(C),R=32767&C,H=v[T];if(w[R]=H,v[T]=R,C>=x){var q=o-C;if((z>7e3||I>24576)&&(q>423||!h)){f=gt(e,c,0,_,k,S,D,I,A,C-A,f),I=z=D=0,A=C;for(var B=0;286>B;++B)k[B]=0;for(B=0;30>B;++B)S[B]=0}var K=2,V=0,P=d,E=R-H&32767;if(q>2&&T==m(C-E))for(var U=r.min(p,q)-1,W=r.min(32767,C),M=r.min(258,q);W>=E&&--P&&R!=H;){if(e[C+K]==e[C+K-E]){for(var N=0;M>N&&e[C+N]==e[C+N-E];++N);if(N>K){if(K=N,V=E,N>U)break;var O=r.min(E,N-2),F=0;for(B=0;O>B;++B){var L=C-E+B&32767,j=L-w[L]&32767;j>F&&(F=j,H=L)}}}E+=(R=H)-(H=w[R])&32767}if(V){_[I++]=268435456|Me[K]<<18|Fe[V];var G=31&Me[K],X=31&Fe[V];D+=Ke[G]+Ve[X],++k[257+G],++S[X],x=C+K,++z}else _[I++]=e[C],++k[e[C]]}}for(C=r.max(C,x);o>C;++C)_[I++]=e[C],++k[e[C]];f=gt(e,c,h,_,k,S,D,I,A,C-A,f),h||(i.r=7&f|c[f/8|0]<<3,f-=7,i.h=v,i.p=w,i.i=C,i.w=x)}else{for(C=i.w||0;o+h>C;C+=65535){var J=C+65535;o>J||(c[f/8|0]=h,J=o),f=dt(c,f+1,e.subarray(C,J))}i.i=o}return at(l,0,0+st(f)+0)})(e,null==t.level?6:t.level,null==t.mem?r.ceil(1.5*r.max(8,r.min(13,r.log(e.length)))):12+t.mem,0,0,a)})(e,this.o,0,0,this.s),t)},e.prototype.push=function(e,t){this.ondata||ot(5),this.s.l&&ot(4);var n=e.length+this.s.z;if(n>this.b.length){if(n>2*this.b.length-32768){var r=new He(-32768&n);r.set(this.b.subarray(0,this.s.z)),this.b=r}var s=this.b.length-this.s.z;s&&(this.b.set(e.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(e.subarray(s),32768),this.s.z=e.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(e,this.s.z),this.s.z+=e.length;this.s.l=1&t,(this.s.z>this.s.w+8191||t)&&(this.p(this.b,t||!1),this.s.w=this.s.i,this.s.i-=2)},e}(),bt=function(){function e(e,t){"function"==typeof e&&(t=e,e={}),this.ondata=t;var n=e&&e.dictionary&&e.dictionary.subarray(-32768);this.s={i:0,b:n?n.length:0},this.o=new He(32768),this.p=new He(0),n&&this.o.set(n)}return e.prototype.e=function(e){if(this.ondata||ot(5),this.d&&ot(4),this.p.length){if(e.length){var t=new He(this.p.length+e.length);t.set(this.p),t.set(e,this.p.length),this.p=t}}else this.p=e},e.prototype.c=function(e){this.s.i=+(this.d=e||!1);var t=this.s.b,n=((e,t,n)=>{var s=e.length;if(!s||t.f&&!t.l)return n||new He(0);var a=!n||2!=t.i,i=t.i;n||(n=new He(3*s));var o=e=>{var t=n.length;if(e>t){var s=new He(r.max(2*t,e));s.set(n),n=s}},l=t.f||0,c=t.p||0,h=t.b||0,f=t.l,u=t.d,p=t.m,d=t.n,g=8*s;do{if(!f){l=nt(e,c,1);var w=nt(e,c+1,3);if(c+=3,!w){var v=e[(x=st(c)+4)-4]|e[x-3]<<8,y=x+v;if(y>s){i&&ot(0);break}a&&o(h+v),n.set(e.subarray(x,y),h),t.b=h+=v,t.p=c=8*y,t.f=l;continue}if(1==w)f=Ze,u=et,p=9,d=5;else if(2==w){var b=nt(e,c,31)+257,m=nt(e,c+10,15)+4,_=b+nt(e,c+5,31)+1;c+=14;for(var k=new He(_),S=new He(19),z=0;m>z;++z)S[Pe[z]]=nt(e,c+3*z,7);c+=3*m;var D=tt(S),C=(1<<D)-1,I=Xe(S,D,1);for(z=0;_>z;){var x,A=I[nt(e,c,C)];if(c+=15&A,16>(x=A>>4))k[z++]=x;else{var T=0,R=0;for(16==x?(R=3+nt(e,c,3),c+=2,T=k[z-1]):17==x?(R=3+nt(e,c,7),c+=3):18==x&&(R=11+nt(e,c,127),c+=7);R--;)k[z++]=T}}var H=k.subarray(0,b),q=k.subarray(b);p=tt(H),d=tt(q),f=Xe(H,p,1),u=Xe(q,d,1)}else ot(1);if(c>g){i&&ot(0);break}}a&&o(h+131072);for(var B=(1<<p)-1,K=(1<<d)-1,V=c;;V=c){var P=(T=f[rt(e,c)&B])>>4;if((c+=15&T)>g){i&&ot(0);break}if(T||ot(2),256>P)n[h++]=P;else{if(256==P){V=c,f=null;break}var E=P-254;if(P>264){var U=Ke[z=P-257];E=nt(e,c,(1<<U)-1)+We[z],c+=U}var W=u[rt(e,c)&K],M=W>>4;if(W||ot(3),c+=15&W,q=Oe[M],M>3&&(U=Ve[M],q+=rt(e,c)&(1<<U)-1,c+=U),c>g){i&&ot(0);break}a&&o(h+131072);var N=h+E;if(q>h){var O=0-q,F=r.min(q,N);for(0>O+h&&ot(3);F>h;++h)n[h]=undefined[O+h]}for(;N>h;h+=4)n[h]=n[h-q],n[h+1]=n[h+1-q],n[h+2]=n[h+2-q],n[h+3]=n[h+3-q];h=N}}t.l=f,t.p=V,t.b=h,t.f=l,f&&(l=1,t.m=p,t.d=u,t.n=d)}while(!l);return h==n.length?n:at(n,0,h)})(this.p,this.s,this.o);this.ondata(at(n,t,this.s.b),this.d),this.o=at(n,this.s.b-32768),this.s.b=this.o.length,this.p=at(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e}(),mt="undefined"!=typeof TextDecoder&&new TextDecoder;try{mt.decode(vt,{stream:!0})}catch(e){}function _t(e,n,r){return class{constructor(s){const i=this;var o,l;o=s,l="level",("function"==typeof t.hasOwn?t.hasOwn(o,l):o.hasOwnProperty(l))&&void 0===s.level&&delete s.level,i.codec=new e(t.assign({},n,s)),r(i.codec,(e=>{if(i.pendingData){const t=i.pendingData;i.pendingData=new a(t.length+e.length);const{pendingData:n}=i;n.set(t,0),n.set(e,t.length)}else i.pendingData=new a(e)}))}append(e){return this.codec.push(e),s(this)}flush(){return this.codec.push(new a,!0),s(this)}};function s(e){if(e.pendingData){const t=e.pendingData;return e.pendingData=null,t}return new a}}const{Deflate:kt,Inflate:St}=((e,t={},n)=>({Deflate:_t(e.Deflate,t.deflate,n),Inflate:_t(e.Inflate,t.inflate,n)}))({Deflate:yt,Inflate:bt},void 0,((e,t)=>e.ondata=t));self.initCodec=()=>{self.Deflate=kt,self.Inflate=St};\n'],{type:"text/javascript"}));e({workerScripts:{inflate:[t],deflate:[t]}})}(he);export{hn as BlobReader,pn as BlobWriter,fn as Data64URIReader,dn as Data64URIWriter,fr as ERR_BAD_FORMAT,wr as ERR_CENTRAL_DIRECTORY_NOT_FOUND,Nr as ERR_DUPLICATED_NAME,yr as ERR_ENCRYPTED,pr as ERR_EOCDR_LOCATOR_ZIP64_NOT_FOUND,dr as ERR_EOCDR_NOT_FOUND,hr as ERR_EOCDR_ZIP64_NOT_FOUND,mr as ERR_EXTRAFIELD_ZIP64_NOT_FOUND,Yt as ERR_HTTP_RANGE,Lr as ERR_INVALID_COMMENT,Pr as ERR_INVALID_ENCRYPTION_STRENGTH,Ir as ERR_INVALID_ENTRY_COMMENT,Or as ERR_INVALID_ENTRY_NAME,jr as ERR_INVALID_EXTRAFIELD_DATA,Kr as ERR_INVALID_EXTRAFIELD_TYPE,Ae as ERR_INVALID_PASSWORD,Te as ERR_INVALID_SIGNATURE,Vr as ERR_INVALID_VERSION,$t as ERR_ITERATOR_COMPLETED_TOO_SOON,gr as ERR_LOCAL_FILE_HEADER_NOT_FOUND,Sr as ERR_SPLIT_ZIP_FILE,zr as ERR_UNSUPPORTED_COMPRESSION,br as ERR_UNSUPPORTED_ENCRYPTION,Xr as ERR_UNSUPPORTED_FORMAT,Tn as HttpRangeReader,An as HttpReader,ln as Reader,Rn as SplitDataReader,Hn as SplitDataWriter,Ln as SplitZipReader,In as SplitZipWriter,wn as TextReader,gn as TextWriter,Wn as Uint8ArrayReader,Un as Uint8ArrayWriter,un as Writer,Dr as ZipReader,Qr as ZipWriter,he as configure,we as getMimeType,Mn as initReader,ge as initShimAsyncCodec,Bn as initStream,qn as initWriter,Nn as readUint8Array,Jt as terminateWorkers};
